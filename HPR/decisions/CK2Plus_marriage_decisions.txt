decisions = {
	marry_close = { #Marry a close relative
		potential = {
			ai = yes
			OR = {
				religion = zoroastrian
				religion = zurvanist
				religion = messalian
				religion = hellenic_pagan
				religion = egyptian_pagan
			}
			is_married = no
			is_betrothed = no
			can_marry = yes
			is_adult = yes
			fertility = 0.01
			OR = {
				NOT = { age = 40 }
				is_female = no
			}
			OR = {
				is_female = no
				is_ruler = yes
				is_primary_heir = yes
			}
			OR = {
				is_ruler = yes
				father_even_if_dead = { higher_tier_than = BARON }
				mother_even_if_dead = { higher_tier_than = BARON }
				any_close_relative = { higher_tier_than = COUNT }
			}
			any_dynasty_member = {
				ai = yes
				is_close_relative = ROOT
				is_within_diplo_range = ROOT
				can_marry = ROOT
				religion = ROOT
				is_adult = yes
				is_married = no
				is_betrothed = no
				is_consort = no
				fertility = 0.01
				prisoner = no
				in_command = no
				is_pregnant = no
				is_ill = no
				NOR = {
					trait = incapable
					trait = in_hiding
				}
				OR = {
					NOT = { age = 30 }
					is_female = no
				}
				OR = {
					AND = {
						NOT = { age = 25 }
						fertility = 0.30
					}
					NOR = {
						age = 40
						age_diff = { who = ROOT years = 3 }
						ROOT = { age_diff = { who = PREV years = 10 } }
					}
				}
				OR = {
					is_ruler = yes
					liege = { ai = no }
					NOT = { liege = { is_close_relative = ROOT } }
					age = 20
				}
				OR = {
					is_ruler = yes
					NOT = {
						liege = {
							ai = no
							OR = {
								is_close_relative = PREV
								dynasty = PREV
							}
						}
					}
				}
			}
		}
		allow = {
			is_ill = no
			in_command = no
			prisoner = no
			is_pregnant = no
			NOR = {
				trait = incapable
				trait = in_hiding
				has_character_modifier = do_not_disturb
			}
		}
		effect = {
			random_dynasty_member = {
				limit = {
					ai = yes
					is_close_relative = ROOT
					is_within_diplo_range = ROOT
					can_marry = ROOT
					religion = ROOT
					is_adult = yes
					is_married = no
					is_betrothed = no
					is_consort = no
					fertility = 0.01
					prisoner = no
					in_command = no
					is_pregnant = no
					is_ill = no
					NOR = {
						trait = incapable
						trait = in_hiding
					}
					OR = {
						NOT = { age = 30 }
						is_female = no
					}
					OR = {
						AND = {
							NOT = { age = 25 }
							fertility = 0.30
						}
						NOR = {
							age = 40
							age_diff = { who = ROOT years = 3 }
							ROOT = { age_diff = { who = PREV years = 10 } }
						}
					}
					OR = {
						is_ruler = yes
						liege = { ai = no }
						NOT = { liege = { is_close_relative = ROOT } }
						age = 20
					}
					OR = {
						is_ruler = yes
						NOT = {
							liege = {
								ai = no
								OR = {
									is_close_relative = PREV
									dynasty = PREV
								}
							}
						}
					}
				}
				log = "[This.GetTitledName] marries [Root.GetTitledName] (Close Marriage)"
				add_spouse = ROOT
				break = yes
			}
		}
		ai_will_do = { 
			factor = 1
			modifier = {
				factor = 0.5
				NOR = {
					real_tier = EMPEROR
					any_close_relative = { real_tier = EMPEROR }
				}
			}
			modifier = {
				factor = 0.5
				NOR = {
					higher_real_tier_than = DUKE
					any_close_relative = { higher_real_tier_than = DUKE }
				}
			}
			modifier = {
				factor = 0.5
				NOR = {
					higher_real_tier_than = COUNT
					any_close_relative = { higher_real_tier_than = COUNT }
				}
			}
			modifier = {
				factor = 0
				OR = {
					religion = egyptian_pagan
					religion = hellenic_pagan
				}
				NOR = {
					higher_real_tier_than = DUKE
					any_close_relative = { higher_real_tier_than = DUKE }
				}
			}
			modifier = {
				factor = 0
				is_ruler = no
				liege = {
					ai = no
					OR = {
						is_close_relative = ROOT
						dynasty = ROOT
					}
				}
			}
		}
	}

	marry_avuncular_1 = { #Marry niece or nephew
		potential = {
			ai = yes
			NOT = { religion_group = muslim }
			OR = {
				is_married = no
				AND = {
					has_polygamy = yes
					NOT = { num_of_spouses = 2 }
					real_tier = COUNT
				}
				AND = {
					has_polygamy = yes
					NOT = { num_of_spouses = 3 }
					OR = {
						real_tier = DUKE
						has_minor_title = title_prince
					}
				}
				AND = {
					has_polygamy = yes
					NOT = { num_of_spouses = 4 }
					higher_real_tier_than = DUKE
				}
			}
			is_betrothed = no
			can_marry = yes
			is_adult = yes
			fertility = 0.01
			OR = {
				NOT = { age = 40 }
				is_female = no
			}
			OR = {
				is_female = no
				is_ruler = yes
				is_primary_heir = yes
			}
			OR = {
				is_ruler = yes
				father_even_if_dead = { higher_tier_than = BARON }
				mother_even_if_dead = { higher_tier_than = BARON }
				any_close_relative = { higher_tier_than = COUNT }
			}			
			any_opinion_modifier_target = {
				OR = {
					reverse_has_opinion_modifier = { who = ROOT modifier = opinion_niece_fix }
					reverse_has_opinion_modifier = { who = ROOT modifier = opinion_nephew_fix }
				}
				ai = yes
				can_marry = ROOT
				religion = ROOT
				is_within_diplo_range = ROOT
				is_adult = yes
				is_married = no
				is_betrothed = no
				is_consort = no
				fertility = 0.01
				prisoner = no
				in_command = no
				is_pregnant = no
				is_ill = no
				NOR = {
					trait = incapable
					trait = in_hiding
				}
				OR = {
					NOT = { age = 30 }
					is_female = no
				}
				OR = {
					AND = {
						NOT = { age = 25 }
						fertility = 0.30
					}
					NOR = {
						age = 40
						age_diff = { who = ROOT years = 3 }
						ROOT = { age_diff = { who = PREV years = 10 } }
					}
				}
				OR = {
					is_ruler = yes
					liege = { ai = no }
					NOT = { liege = { is_close_relative = ROOT } }
					age = 20
				}
				OR = {
					same_realm = ROOT
					father = { same_realm = PREV }
					religion = ROOT
				}
				OR = {
					is_ruler = yes
					NOT = {
						liege = {
							ai = no
							OR = {
								is_close_relative = PREV
								dynasty = PREV
							}
						}
					}
				}
			}
		}
		allow = {
			is_ill = no
			in_command = no
			prisoner = no
			is_pregnant = no
			NOR = {
				trait = incapable
				trait = in_hiding
				has_character_modifier = do_not_disturb
			}
		}
		effect = {
			#prefer the child of my brother
			random_opinion_modifier_target = {
				limit = {
					OR = {
						father_even_if_dead = { father_even_if_dead = { ROOT = { father_even_if_dead = { character = PREVPREV } } } }
						father_even_if_dead = { mother_even_if_dead = { ROOT = { mother_even_if_dead = { character = PREVPREV } } } }
					}
					OR = {
						reverse_has_opinion_modifier = { who = ROOT modifier = opinion_niece_fix }
						reverse_has_opinion_modifier = { who = ROOT modifier = opinion_nephew_fix }
					}
					ai = yes
					can_marry = ROOT
					religion = ROOT
					is_within_diplo_range = ROOT
					is_adult = yes
					is_married = no
					is_betrothed = no
					is_consort = no
					fertility = 0.01
					prisoner = no
					in_command = no
					is_pregnant = no
					is_ill = no
					NOR = {
						trait = incapable
						trait = in_hiding
					}
					OR = {
						NOT = { age = 30 }
						is_female = no
					}
					OR = {
						AND = {
							NOT = { age = 25 }
							fertility = 0.30
						}
						NOR = {
							age = 40
							age_diff = { who = ROOT years = 3 }
							ROOT = { age_diff = { who = PREV years = 10 } }
						}
					}
					OR = {
						is_ruler = yes
						liege = { ai = no }
						NOT = { liege = { is_close_relative = ROOT } }
						age = 20
					}
					OR = {
						same_realm = ROOT
						father = { same_realm = PREV }
						religion = ROOT
					}
					OR = {
						is_ruler = yes
						NOT = {
							liege = {
								ai = no
								OR = {
									is_close_relative = PREV
									dynasty = PREV
								}
							}
						}
					}
				}
				log = "[This.GetTitledName] marries [Root.GetTitledName] (Avuncular1 Marriage)"
				add_spouse = ROOT
				break = yes
			}
			#then marry them to any niece/nephew
			random_opinion_modifier_target = {
				limit = {
					OR = {
						reverse_has_opinion_modifier = { who = ROOT modifier = opinion_niece_fix }
						reverse_has_opinion_modifier = { who = ROOT modifier = opinion_nephew_fix }
					}
					ai = yes
					can_marry = ROOT
					religion = ROOT
					is_within_diplo_range = ROOT
					is_adult = yes
					is_married = no
					is_betrothed = no
					is_consort = no
					fertility = 0.01
					prisoner = no
					in_command = no
					is_pregnant = no
					is_ill = no
					NOR = {
						trait = incapable
						trait = in_hiding
					}
					OR = {
						NOT = { age = 30 }
						is_female = no
					}
					OR = {
						AND = {
							NOT = { age = 25 }
							fertility = 0.30
						}
						NOR = {
							age = 40
							age_diff = { who = ROOT years = 3 }
							ROOT = { age_diff = { who = PREV years = 10 } }
						}
					}
					OR = {
						is_ruler = yes
						liege = { ai = no }
						NOT = { liege = { is_close_relative = ROOT } }
						age = 20
					}
					OR = {
						same_realm = ROOT
						father = { same_realm = PREV }
						religion = ROOT
					}
					OR = {
						is_ruler = yes
						NOT = {
							liege = {
								ai = no
								OR = {
									is_close_relative = PREV
									dynasty = PREV
								}
							}
						}
					}
				}
				log = "[This.GetTitledName] marries [Root.GetTitledName] (Avuncular1 Marriage)"
				add_spouse = ROOT
			}
		}
		ai_will_do = { 
			factor = 1
			modifier = {
				factor = 0.25 #Basic slow down.
			}
			modifier = {
				factor = 4
				has_ambition = obj_get_married
			}
			modifier = { #Avoid marrying aunts and nephews
				factor = 0.01
				religion_group = jewish_group
				is_female = yes
			}
			modifier = {
				factor = 0
				is_ruler = no
				liege = {
					ai = no
					OR = {
						is_close_relative = ROOT
						dynasty = ROOT
					}
				}
			}
			modifier = {
				factor = 5 #Helps keep realms dynastic
				is_female = yes
				OR = {
					is_ruler = yes
					is_primary_heir = yes
				}
			}
			modifier = {
				factor = 0.25 #Zoroastrians prefer closer relations
				religion_group = zoroastrian_group
			}
			modifier = {
				factor = 0.5
				religion = messalian
			}
		}
	}

	marry_avuncular_2 = { #Marry an uncle or aunt.
		is_high_prio = yes
		potential = {
			ai = yes
			NOT = { religion_group = muslim }
			OR = {
				is_married = no
				AND = {
					has_polygamy = yes
					NOT = { num_of_spouses = 2 }
					real_tier = COUNT
				}
				AND = {
					has_polygamy = yes
					NOT = { num_of_spouses = 3 }
					OR = {
						real_tier = DUKE
						has_minor_title = title_prince
					}
				}
				AND = {
					has_polygamy = yes
					NOT = { num_of_spouses = 4 }
					higher_real_tier_than = DUKE
				}
			}
			is_betrothed = no
			can_marry = yes
			is_adult = yes
			fertility = 0.01
			OR = {
				NOT = { age = 40 }
				is_female = no
			}
			OR = {
				is_female = no
				is_ruler = yes
				is_primary_heir = yes
			}
			OR = {
				is_ruler = yes
				father_even_if_dead = { higher_tier_than = BARON }
				mother_even_if_dead = { higher_tier_than = BARON }
				any_close_relative = { higher_tier_than = COUNT }
			}			
			any_opinion_modifier_target = {
				OR = {
					reverse_has_opinion_modifier = { who = ROOT modifier = opinion_aunt_fix }
					reverse_has_opinion_modifier = { who = ROOT modifier = opinion_uncle_fix }
				}
				ai = yes
				can_marry = ROOT
				religion = ROOT
				is_within_diplo_range = ROOT
				is_adult = yes
				is_married = no
				is_betrothed = no
				is_consort = no
				fertility = 0.01
				prisoner = no
				in_command = no
				is_pregnant = no
				is_ill = no
				NOR = {
					trait = incapable
					trait = in_hiding
				}
				OR = {
					NOT = { age = 30 }
					is_female = no
				}
				OR = {
					AND = {
						NOT = { age = 25 }
						fertility = 0.30
					}
					NOR = {
						age = 40
						age_diff = { who = ROOT years = 3 }
						ROOT = { age_diff = { who = PREV years = 10 } }
					}
				}
				OR = {
					is_ruler = yes
					liege = { ai = no }
					NOT = { liege = { is_close_relative = ROOT } }
					age = 20
				}
				OR = {
					same_realm = ROOT
					father = { same_realm = PREV }
					religion = ROOT
				}
				OR = {
					is_ruler = yes
					NOT = {
						liege = {
							ai = no
							OR = {
								is_close_relative = PREV
								dynasty = PREV
							}
						}
					}
				}
			}
		}
		allow = {
			is_ill = no
			in_command = no
			prisoner = no
			is_pregnant = no
			NOR = {
				trait = incapable
				trait = in_hiding
				has_character_modifier = do_not_disturb
			}
		}
		effect = {
			#prefer my father's brother/sister
			random_opinion_modifier_target = {
				limit = {
					OR = {
						father_even_if_dead = { ROOT = { father_even_if_dead = { father_even_if_dead = { character = PREVPREVPREV } } } }
						mother_even_if_dead = { ROOT = { father_even_if_dead = { mother_even_if_dead = { character = PREVPREVPREV } } } }
					}
					OR = {
						reverse_has_opinion_modifier = { who = ROOT modifier = opinion_aunt_fix }
						reverse_has_opinion_modifier = { who = ROOT modifier = opinion_uncle_fix }
					}
					ai = yes
					can_marry = ROOT
					religion = ROOT
					is_within_diplo_range = ROOT
					is_adult = yes
					is_married = no
					is_betrothed = no
					is_consort = no
					fertility = 0.01
					prisoner = no
					in_command = no
					is_pregnant = no
					is_ill = no
					NOR = {
						trait = incapable
						trait = in_hiding
					}
					OR = {
						NOT = { age = 30 }
						is_female = no
					}
					OR = {
						AND = {
							NOT = { age = 25 }
							fertility = 0.30
						}
						NOR = {
							age = 40
							age_diff = { who = ROOT years = 3 }
							ROOT = { age_diff = { who = PREV years = 10 } }
						}
					}
					OR = {
						is_ruler = yes
						liege = { ai = no }
						NOT = { liege = { is_close_relative = ROOT } }
						age = 20
					}
					OR = {
						same_realm = ROOT
						father = { same_realm = PREV }
						religion = ROOT
					}
					OR = {
						is_ruler = yes
						NOT = {
							liege = {
								ai = no
								OR = {
									is_close_relative = PREV
									dynasty = PREV
								}
							}
						}
					}
				}
				log = "[This.GetTitledName] marries [Root.GetTitledName] (Avuncular2 Marriage)"
				add_spouse = ROOT
				break = yes
			}
			#failing that, any aunt/uncle will do
			random_opinion_modifier_target = {
				limit = {
					OR = {
						reverse_has_opinion_modifier = { who = ROOT modifier = opinion_aunt_fix }
						reverse_has_opinion_modifier = { who = ROOT modifier = opinion_uncle_fix }
					}
					ai = yes
					can_marry = ROOT
					religion = ROOT
					is_within_diplo_range = ROOT
					is_adult = yes
					is_married = no
					is_betrothed = no
					is_consort = no
					fertility = 0.01
					prisoner = no
					in_command = no
					is_pregnant = no
					is_ill = no
					NOR = {
						trait = incapable
						trait = in_hiding
					}
					OR = {
						NOT = { age = 30 }
						is_female = no
					}
					OR = {
						AND = {
							NOT = { age = 25 }
							fertility = 0.30
						}
						NOR = {
							age = 40
							age_diff = { who = ROOT years = 3 }
							ROOT = { age_diff = { who = PREV years = 10 } }
						}
					}
					OR = {
						is_ruler = yes
						liege = { ai = no }
						NOT = { liege = { is_close_relative = ROOT } }
						age = 20
					}
					OR = {
						same_realm = ROOT
						father = { same_realm = PREV }
						religion = ROOT
					}
					OR = {
						is_ruler = yes
						NOT = {
							liege = {
								ai = no
								OR = {
									is_close_relative = PREV
									dynasty = PREV
								}
							}
						}
					}
				}
				log = "[This.GetTitledName] marries [Root.GetTitledName] (Avuncular2 Marriage)"
				add_spouse = ROOT
			}
		}
		ai_will_do = { 
			factor = 1
			modifier = {
				factor = 0.2 #Basic slow down.
			}
			modifier = {
				factor = 3
				has_ambition = obj_get_married
			}
			modifier = {
				factor = 0
				is_ruler = no
				liege = {
					ai = no
					OR = {
						is_close_relative = ROOT
						dynasty = ROOT
					}
				}
			}
			modifier = { #Avoid marrying aunts and nephews
				factor = 0.01
				religion_group = jewish_group
				is_female = no
			}
			modifier = {
				factor = 100
				is_female = yes
				OR = {
					is_ruler = yes
					is_primary_heir = yes
				}
			}
			modifier = {
				factor = 0.1 #Zoroastrians prefer closer relations...
				religion_group = zoroastrian_group
			}
			modifier = {
				factor = 0.2
				religion = messalian
			}
		}
	}

	marry_cousin = { #Make cousin marriage more common.
		potential = {
			ai = yes
			OR = {
				is_married = no
				AND = {
					has_polygamy = yes
					NOT = { num_of_spouses = 2 }
					real_tier = COUNT
				}
				AND = {
					has_polygamy = yes
					NOT = { num_of_spouses = 3 }
					OR = {
						real_tier = DUKE
						has_minor_title = title_prince
					}
				}
				AND = {
					has_polygamy = yes
					NOT = { num_of_spouses = 4 }
					higher_real_tier_than = DUKE
				}
			}
			is_betrothed = no
			can_marry = yes
			is_adult = yes
			fertility = 0.01
			OR = {
				NOT = { age = 40 }
				is_female = no
			}
			OR = {
				is_female = no
				is_ruler = yes
				is_primary_heir = yes
			}
			OR = {
				is_ruler = yes
				father_even_if_dead = { higher_tier_than = BARON }
				mother_even_if_dead = { higher_tier_than = BARON }
				any_close_relative = { higher_tier_than = COUNT }
			}			
			any_opinion_modifier_target = {
				reverse_has_opinion_modifier = { who = ROOT modifier = opinion_cousin }
				ai = yes
				can_marry = ROOT
				religion = ROOT
				is_within_diplo_range = ROOT
				is_adult = yes
				is_married = no
				is_betrothed = no
				is_consort = no
				fertility = 0.01
				prisoner = no
				in_command = no
				is_pregnant = no
				is_ill = no
				NOR = {
					trait = incapable
					trait = in_hiding
				}
				OR = {
					NOT = { age = 30 }
					is_female = no
				}
				OR = {
					AND = {
						NOT = { age = 25 }
						fertility = 0.30
					}
					NOR = {
						age = 40
						age_diff = { who = ROOT years = 3 }
						ROOT = { age_diff = { who = PREV years = 10 } }
					}
				}
				OR = {
					is_ruler = yes
					liege = { ai = no }
					NOT = { liege = { is_close_relative = ROOT } }
					age = 20
				}
				OR = {
					same_realm = ROOT
					father = { same_realm = PREV }
					religion = ROOT
				}
				OR = {
					is_ruler = yes
					NOT = {
						liege = {
							ai = no
							OR = {
								is_close_relative = PREV
								dynasty = PREV
							}
						}
					}
				}
			}
		}
		allow = {
			is_ill = no
			in_command = no
			prisoner = no
			is_pregnant = no
			NOR = {
				trait = incapable
				trait = in_hiding
				has_character_modifier = do_not_disturb
			}
		}
		effect = {
			#prefer my father's side of the family
			random_opinion_modifier_target = {
				limit = {
					reverse_has_opinion_modifier = { who = ROOT modifier = opinion_cousin }
					OR = {
						father_even_if_dead = { father_even_if_dead = { ROOT = { father_even_if_dead = { father_even_if_dead = { character = PREVPREVPREV } } } } }
						father_even_if_dead = { mother_even_if_dead = { ROOT = { father_even_if_dead = { mother_even_if_dead = { character = PREVPREVPREV } } } } }
						mother_even_if_dead = { father_even_if_dead = { ROOT = { father_even_if_dead = { father_even_if_dead = { character = PREVPREVPREV } } } } }
						mother_even_if_dead = { mother_even_if_dead = { ROOT = { father_even_if_dead = { mother_even_if_dead = { character = PREVPREVPREV } } } } }
					}
					ai = yes
					can_marry = ROOT
					religion = ROOT
					is_within_diplo_range = ROOT
					is_adult = yes
					is_married = no
					is_betrothed = no
					is_consort = no
					fertility = 0.01
					prisoner = no
					in_command = no
					is_pregnant = no
					is_ill = no
					NOR = {
						trait = incapable
						trait = in_hiding
					}
					OR = {
						NOT = { age = 30 }
						is_female = no
					}
					OR = {
						AND = {
							NOT = { age = 25 }
							fertility = 0.30
						}
						NOR = {
							age = 40
							age_diff = { who = ROOT years = 3 }
							ROOT = { age_diff = { who = PREV years = 10 } }
						}
					}
					OR = {
						is_ruler = yes
						liege = { ai = no }
						NOT = { liege = { is_close_relative = ROOT } }
						age = 20
					}
					OR = {
						same_realm = ROOT
						father = { same_realm = PREV }
						religion = ROOT
					}
					OR = {
						is_ruler = yes
						NOT = {
							liege = {
								ai = no
								OR = {
									is_close_relative = PREV
									dynasty = PREV
								}
							}
						}
					}
				}
				log = "[This.GetTitledName] marries [Root.GetTitledName] (Cousin Marriage)"
				add_spouse = ROOT
				break = yes
			}
			#failing that, my mother's side will do
			random_opinion_modifier_target = {
				limit = {
					reverse_has_opinion_modifier = { who = ROOT modifier = opinion_cousin }
					ai = yes
					can_marry = ROOT
					religion = ROOT
					is_within_diplo_range = ROOT
					is_adult = yes
					is_married = no
					is_betrothed = no
					is_consort = no
					fertility = 0.01
					prisoner = no
					in_command = no
					is_pregnant = no
					is_ill = no
					NOR = {
						trait = incapable
						trait = in_hiding
					}
					OR = {
						NOT = { age = 30 }
						is_female = no
					}
					OR = {
						AND = {
							NOT = { age = 25 }
							fertility = 0.30
						}
						NOR = {
							age = 40
							age_diff = { who = ROOT years = 3 }
							ROOT = { age_diff = { who = PREV years = 10 } }
						}
					}
					OR = {
						is_ruler = yes
						liege = { ai = no }
						NOT = { liege = { is_close_relative = ROOT } }
						age = 20
					}
					OR = {
						same_realm = ROOT
						father = { same_realm = PREV }
						religion = ROOT
					}
					OR = {
						is_ruler = yes
						NOT = {
							liege = {
								ai = no
								OR = {
									is_close_relative = PREV
									dynasty = PREV
								}
							}
						}
					}
				}
				log = "[This.GetTitledName] marries [Root.GetTitledName] (Cousin Marriage)"
				add_spouse = ROOT
			}
		}
		ai_will_do = { 
			factor = 1
			modifier = {
				factor = 0.33 #Slow it down
			}
			modifier = {
				factor = 3
				has_ambition = obj_get_married
			}
			modifier = {
				factor = 0.25 #Zoroastrians prefer closer relations...
				religion_group = zoroastrian_group
			}
			modifier = {
				factor = 0.2
				religion = messalian
			}
			modifier = {
				factor = 0.1
				religion_group = muslim #Muslims prefer FBD marriage
			}
			modifier = {
				factor = 0
				is_ruler = no
				liege = {
					ai = no
					OR = {
						is_close_relative = ROOT
						dynasty = ROOT
					}
				}
			}
		}
	}

	marry_paternal_cousin = { #Muslim cousin marriage
		is_high_prio = yes
		potential = {
			ai = yes
			religion_group = muslim
			OR = {
				is_married = no
				AND = {
					has_polygamy = yes
					NOT = { num_of_spouses = 2 }
					real_tier = COUNT
				}
				AND = {
					has_polygamy = yes
					NOT = { num_of_spouses = 3 }
					OR = {
						real_tier = DUKE
						has_minor_title = title_prince
					}
				}
				AND = {
					has_polygamy = yes
					NOT = { num_of_spouses = 4 }
					higher_real_tier_than = DUKE
				}
			}
			is_betrothed = no
			can_marry = yes
			is_adult = yes
			fertility = 0.01
			OR = {
				NOT = { age = 40 }
				is_female = no
			}
			OR = {
				is_female = no
				is_ruler = yes
				is_primary_heir = yes
			}
			OR = {
				is_ruler = yes
				father_even_if_dead = { higher_tier_than = BARON }
				mother_even_if_dead = { higher_tier_than = BARON }
				any_close_relative = { higher_tier_than = COUNT }
			}			
			any_opinion_modifier_target = {
				reverse_has_opinion_modifier = { who = ROOT modifier = opinion_cousin }
				OR = {
					father_even_if_dead = { father_even_if_dead = { ROOT = { father_even_if_dead = { father_even_if_dead = { character = PREVPREVPREV } } } } }
					father_even_if_dead = { mother_even_if_dead = { ROOT = { father_even_if_dead = { mother_even_if_dead = { character = PREVPREVPREV } } } } }
					mother_even_if_dead = { father_even_if_dead = { ROOT = { father_even_if_dead = { father_even_if_dead = { character = PREVPREVPREV } } } } }
					mother_even_if_dead = { mother_even_if_dead = { ROOT = { father_even_if_dead = { mother_even_if_dead = { character = PREVPREVPREV } } } } }
				}
				ai = yes
				can_marry = ROOT
				religion = ROOT
				is_within_diplo_range = ROOT
				is_adult = yes
				is_married = no
				is_betrothed = no
				is_consort = no
				fertility = 0.01
				prisoner = no
				in_command = no
				is_pregnant = no
				is_ill = no
				NOR = {
					trait = incapable
					trait = in_hiding
				}
				OR = {
					NOT = { age = 30 }
					is_female = no
				}
				OR = {
					AND = {
						NOT = { age = 25 }
						fertility = 0.30
					}
					NOR = {
						age = 40
						age_diff = { who = ROOT years = 3 }
						ROOT = { age_diff = { who = PREV years = 10 } }
					}
				}
				OR = {
					is_ruler = yes
					liege = { ai = no }
					NOT = { liege = { is_close_relative = ROOT } }
					age = 20
				}
				OR = {
					same_realm = ROOT
					father = { same_realm = PREV }
					religion = ROOT
				}
				OR = {
					is_ruler = yes
					NOT = {
						liege = {
							ai = no
							OR = {
								is_close_relative = PREV
								dynasty = PREV
							}
						}
					}
				}
			}
		}
		allow = {
			is_ill = no
			in_command = no
			prisoner = no
			is_pregnant = no
			NOR = {
				trait = incapable
				trait = in_hiding
				has_character_modifier = do_not_disturb
			}
		}
		effect = {
			random_opinion_modifier_target = {
				limit = {
					reverse_has_opinion_modifier = { who = ROOT modifier = opinion_cousin }
					OR = {
						father_even_if_dead = { father_even_if_dead = { ROOT = { father_even_if_dead = { father_even_if_dead = { character = PREVPREVPREV } } } } }
						father_even_if_dead = { mother_even_if_dead = { ROOT = { father_even_if_dead = { mother_even_if_dead = { character = PREVPREVPREV } } } } }
						mother_even_if_dead = { father_even_if_dead = { ROOT = { father_even_if_dead = { father_even_if_dead = { character = PREVPREVPREV } } } } }
						mother_even_if_dead = { mother_even_if_dead = { ROOT = { father_even_if_dead = { mother_even_if_dead = { character = PREVPREVPREV } } } } }
					}
					ai = yes
					can_marry = ROOT
					religion = ROOT
					is_within_diplo_range = ROOT
					is_adult = yes
					is_married = no
					is_betrothed = no
					is_consort = no
					fertility = 0.01
					prisoner = no
					in_command = no
					is_pregnant = no
					is_ill = no
					NOR = {
						trait = incapable
						trait = in_hiding
					}
					OR = {
						NOT = { age = 30 }
						is_female = no
					}
					OR = {
						AND = {
							NOT = { age = 25 }
							fertility = 0.30
						}
						NOR = {
							age = 40
							age_diff = { who = ROOT years = 3 }
							ROOT = { age_diff = { who = PREV years = 10 } }
						}
					}
					OR = {
						is_ruler = yes
						liege = { ai = no }
						NOT = { liege = { is_close_relative = ROOT } }
						age = 20
					}
					OR = {
						same_realm = ROOT
						father = { same_realm = PREV }
						religion = ROOT
					}
					OR = {
						is_ruler = yes
						NOT = {
							liege = {
								ai = no
								OR = {
									is_close_relative = PREV
									dynasty = PREV
								}
							}
						}
					}
				}
				log = "[This.GetTitledName] marries [Root.GetTitledName] (Cousin Marriage)"
				add_spouse = ROOT
			}
		}
		ai_will_do = { 
			factor = 1
			modifier = {
				factor = 0.5
				NOR = {
					higher_real_tier_than = DUKE
					any_close_relative = { higher_real_tier_than = DUKE }
				}
			}
			modifier = {
				factor = 0.5
				NOR = {
					higher_real_tier_than = COUNT
					any_close_relative = { higher_real_tier_than = COUNT }
				}
			}
			modifier = {
				factor = 0
				is_ruler = no
				liege = {
					ai = no
					OR = {
						is_close_relative = ROOT
						dynasty = ROOT
					}
				}
			}
		}
	}
}

