namespace = Plus

#reserved: Plus.2200 to Plus.2299

################################################
# SCHISM EVENTS
# Originally written by Hansol "LumberKing" Lee
# Adapted/Revised by Rylock
################################################

### Papacy of Rome

# Rome Re-Established
character_event = { 
	id = Plus.2200

	hide_window = yes
	religion_group = christian
	only_rulers = yes

	trigger = {
		has_landed_title = b_roma
		is_theocracy = yes
		NOT = { has_landed_title = d_pentarch_rome }
		OR = {
			religion = orthodox
			religion = monothelite
			religion = iconoclast
			religion = miaphysite
			religion = monophysite
			religion = nestorian
			religion = messalian
			religion = apostolic
			religion = paulician
		}
		OR = {
			independent = yes
			top_liege = {
				higher_real_tier_than = DUKE
				religion = ROOT
			}
		}
	}

	mean_time_to_happen = {
		days = 1
	}
	
	immediate = {
		any_liege = {
			limit = { tier = EMPEROR }
			save_event_target_as = new_liege
		}
		any_liege = {
			limit = { tier = KING }
			save_event_target_as = new_liege
		}
		d_pentarch_rome = { grant_title = ROOT }
		set_defacto_liege = event_target:new_liege
	}

	option = {
		name = OK
	}
}

# Rome De-Established
character_event = {
	id = Plus.2201

	hide_window = yes
	only_playable = yes

	trigger = {
		has_landed_title = d_pentarch_rome
		OR = {
			NOT = { has_landed_title = b_roma }
			is_theocracy = no
			NOR = {
				religion = orthodox
				religion = monothelite
				religion = iconoclast
				religion = miaphysite
				religion = monophysite
				religion = nestorian
				religion = messalian
				religion = apostolic
				religion = paulician
			}
		}
	}

	mean_time_to_happen = {
		days = 1
	}
	
	immediate = {
		d_pentarch_rome = { unsafe_destroy_landed_title = THIS }
	}

	option = {
		name = OK
	}
}

### Patriarchate of Constantinople

# Constantinople Re-Established
character_event = { 
	id = Plus.2202

	hide_window = yes
	religion_group = christian
	only_rulers = yes

	trigger = {
		has_landed_title = b_hagiasophia
		is_theocracy = yes
		NOT = { has_landed_title = d_pentarch_constantinople }
		OR = {
			religion = orthodox
			religion = monothelite
			religion = iconoclast
		}
		OR = {
			independent = yes
			top_liege = {
				higher_real_tier_than = DUKE
				religion = ROOT
			}
		}
	}

	mean_time_to_happen = {
		days = 1
	}
	
	immediate = {
		any_liege = {
			limit = { tier = EMPEROR }
			save_event_target_as = new_liege
		}
		any_liege = {
			limit = { tier = KING }
			save_event_target_as = new_liege
		}
		d_pentarch_constantinople = { grant_title = ROOT }
		set_defacto_liege = event_target:new_liege
	}

	option = {
		name = OK
	}
}

# Constantinople De-Established
character_event = {
	id = Plus.2203

	hide_window = yes
	only_playable = yes

	trigger = {
		has_landed_title = d_pentarch_constantinople
		OR = {
			NOT = { has_landed_title = b_hagiasophia }
			is_theocracy = no
			NOR = {
				religion = orthodox
				religion = monothelite
				religion = iconoclast
			}
		}
	}

	mean_time_to_happen = {
		days = 1
	}
	
	immediate = {
		d_pentarch_constantinople = { unsafe_destroy_landed_title = THIS }
	}

	option = {
		name = OK
	}
}

# Constantinople Reformed
character_event = {
	id = Plus.2204

	hide_window = yes
	religion_group = christian
	only_playable = yes

	trigger = {
		OR = {
			has_landed_title = k_orthodox
			has_landed_title = d_iconoclast
		}
		NOT = { has_landed_title = b_hagiasophia }
		b_hagiasophia = {
			has_holder = yes
			holder_scope = {
				religion = ROOT
				ai = yes
				NOT = { character = ROOT }
			}
		}
	}

	mean_time_to_happen = {
		days = 1
	}
	
	immediate = {
		b_hagiasophia = { grant_title = ROOT }
	}

	option = {
		name = OK
	}
}

### Papacy of Alexandria

# Alexandria Re-Established
character_event = { 
	id = Plus.2205

	hide_window = yes
	religion_group = christian
	only_rulers = yes

	trigger = {
		has_landed_title = b_alexandria
		is_theocracy = yes
		NOT = { has_landed_title = d_pentarch_alexandria }
		OR = {
			religion = orthodox
			religion = monothelite
			religion = iconoclast
			religion = miaphysite
			religion = monophysite
			religion = nestorian
			religion = messalian
			religion = apostolic
			religion = paulician
		}
		OR = {
			independent = yes
			top_liege = {
				higher_real_tier_than = DUKE
				religion = ROOT
			}
		}
	}

	mean_time_to_happen = {
		days = 1
	}
	
	immediate = {
		any_liege = {
			limit = { tier = EMPEROR }
			save_event_target_as = new_liege
		}
		any_liege = {
			limit = { tier = KING }
			save_event_target_as = new_liege
		}
		d_pentarch_alexandria = { grant_title = ROOT }
		set_defacto_liege = event_target:new_liege
	}

	option = {
		name = OK
	}
}

# Alexandria De-Established
character_event = {
	id = Plus.2206

	hide_window = yes
	only_playable = yes

	trigger = {
		has_landed_title = d_pentarch_alexandria
		OR = {
			NOT = { has_landed_title = b_alexandria }
			is_theocracy = no
			NOR = {
				religion = orthodox
				religion = monothelite
				religion = iconoclast
				religion = miaphysite
				religion = monophysite
				religion = nestorian
				religion = messalian
				religion = apostolic
				religion = paulician
			}
		}
	}

	mean_time_to_happen = {
		days = 1
	}
	
	immediate = {
		d_pentarch_alexandria = { unsafe_destroy_landed_title = THIS }
	}

	option = {
		name = OK
	}
}

# Alexandria Reformed
character_event = {
	id = Plus.2207

	hide_window = yes
	religion_group = christian
	only_playable = yes

	trigger = {
		OR = {
			has_landed_title = d_miaphysite
			has_landed_title = d_monophysite
		}
		NOT = { has_landed_title = b_alexandria }
		b_alexandria = {
			has_holder = yes
			holder_scope = {
				religion = ROOT
				ai = yes
				NOT = { character = ROOT }
			}
		}
	}

	mean_time_to_happen = {
		days = 1
	}
	
	immediate = {
		b_alexandria = { grant_title = ROOT }
	}

	option = {
		name = OK
	}
}

### Patriarchate of Antioch

# Antioch Re-Established
character_event = { 
	id = Plus.2208

	hide_window = yes
	religion_group = christian
	only_rulers = yes

	trigger = {
		has_landed_title = b_antiocheia
		is_theocracy = yes
		NOT = { has_landed_title = d_pentarch_antioch }
		OR = {
			religion = orthodox
			religion = monothelite
			religion = iconoclast
			religion = miaphysite
			religion = monophysite
			religion = nestorian
			religion = messalian
			religion = apostolic
			religion = paulician
		}
		OR = {
			independent = yes
			top_liege = {
				higher_real_tier_than = DUKE
				religion = ROOT
			}
		}
	}

	mean_time_to_happen = {
		days = 1
	}
	
	immediate = {
		any_liege = {
			limit = { tier = EMPEROR }
			save_event_target_as = new_liege
		}
		any_liege = {
			limit = { tier = KING }
			save_event_target_as = new_liege
		}
		d_pentarch_antioch = { grant_title = ROOT }
		set_defacto_liege = event_target:new_liege
	}

	option = {
		name = OK
	}
}

# Antioch De-Established
character_event = {
	id = Plus.2209

	hide_window = yes
	only_playable = yes

	trigger = {
		has_landed_title = d_pentarch_antioch
		OR = {
			NOT = { has_landed_title = b_antiocheia }
			is_theocracy = no
			NOR = {
				religion = orthodox
				religion = monothelite
				religion = iconoclast
				religion = miaphysite
				religion = monophysite
				religion = nestorian
				religion = messalian
				religion = apostolic
				religion = paulician
			}
		}
	}

	mean_time_to_happen = {
		days = 1
	}
	
	immediate = {
		d_pentarch_antioch = { unsafe_destroy_landed_title = THIS }
	}

	option = {
		name = OK
	}
}

# Antioch Reformed
character_event = {
	id = Plus.2210

	hide_window = yes
	religion_group = christian
	only_playable = yes

	trigger = {
		OR = {
			has_landed_title = d_monothelite
			has_landed_title = d_apostolic
			has_landed_title = d_paulician
			has_landed_title = d_nestorian
			has_landed_title = d_messalian
		}
		NOT = { has_landed_title = b_antiocheia }
		b_antiocheia = {
			has_holder = yes
			holder_scope = {
				religion = ROOT
				ai = yes
				NOT = { character = ROOT }
			}
		}
	}

	mean_time_to_happen = {
		days = 1
	}
	
	immediate = {
		b_antiocheia = { grant_title = ROOT }
	}

	option = {
		name = OK
	}
}

### Patriarchate of Jerusalem

# Jeusalem Re-Established
character_event = { 
	id = Plus.2211

	hide_window = yes
	religion_group = christian
	only_rulers = yes

	trigger = {
		has_landed_title = b_jerusalem
		is_theocracy = yes
		NOT = { has_landed_title = d_pentarch_jerusalem }
		OR = {
			religion = orthodox
			religion = monothelite
			religion = iconoclast
		}
		OR = {
			independent = yes
			top_liege = {
				higher_real_tier_than = DUKE
				religion = ROOT
			}
		}
	}

	mean_time_to_happen = {
		days = 1
	}
	
	immediate = {
		any_liege = {
			limit = { tier = EMPEROR }
			save_event_target_as = new_liege
		}
		any_liege = {
			limit = { tier = KING }
			save_event_target_as = new_liege
		}
		d_pentarch_jerusalem = { grant_title = ROOT }
		set_defacto_liege = event_target:new_liege
	}

	option = {
		name = OK
	}
}

# Jerusalem De-Established
character_event = {
	id = Plus.2212

	hide_window = yes
	only_playable = yes

	trigger = {
		has_landed_title = d_pentarch_jerusalem
		OR = {
			NOT = { has_landed_title = b_jerusalem }
			is_theocracy = no
			NOR = {
				religion = orthodox
				religion = monothelite
				religion = iconoclast
			}
		}
	}

	mean_time_to_happen = {
		days = 1
	}
	
	immediate = {
		d_pentarch_jerusalem = { unsafe_destroy_landed_title = THIS }
	}

	option = {
		name = OK
	}
}

# Establishing Liege for the Pentarchs
character_event = {
	id = Plus.2213

	hide_window = yes
	only_independent = yes
	only_playable = yes
	religion_group = christian

	trigger = {
		lower_tier_than = KING
		OR = {
			has_landed_title = d_pentarch_rome
			has_landed_title = d_pentarch_constantinople
			has_landed_title = d_pentarch_alexandria
			has_landed_title = d_pentarch_antioch
			has_landed_title = d_pentarch_jerusalem	
			has_landed_title = d_latin_constantinople
			has_landed_title = d_latin_alexandria
			has_landed_title = d_latin_antioch
			has_landed_title = d_latin_jerusalem				
		}
		NOT = { trait = rebel }
		capital_holding = {
			dejure_liege_title = {
				holder_scope = {
					top_liege = {
						religion = ROOT
						higher_tier_than = ROOT
					}
				}
			}
		}
	}

	mean_time_to_happen = {
		days = 1
	}
	
	immediate = {
		capital_holding = {
			dejure_liege_title = {
				holder_scope = {
					top_liege = {
						set_defacto_vassal = ROOT
					}
				}
			}
		}
	}
}

### Latin Patriarchate of Constantinople

# Constantinople Re-Established
character_event = { 
	id = Plus.2214

	hide_window = yes
	religion_group = christian
	only_rulers = yes

	trigger = {
		has_landed_title = b_hagiasophia
		is_theocracy = yes
		NOT = { has_landed_title = d_latin_constantinople }
		OR = {
			religion = catholic
			religion = fraticelli
			religion = adoptionist
		}
		OR = {
			independent = yes
			any_liege = { higher_real_tier_than = DUKE }
		}
	}

	mean_time_to_happen = {
		days = 1
	}
	
	immediate = {
		any_liege = {
			limit = { tier = EMPEROR }
			save_event_target_as = new_liege
		}
		any_liege = {
			limit = { tier = KING }
			save_event_target_as = new_liege
		}
		d_latin_constantinople = { grant_title = ROOT }
		set_defacto_liege = event_target:new_liege
	}
}

# Constantinople De-Established
character_event = {
	id = Plus.2215

	hide_window = yes
	only_playable = yes

	trigger = {
		has_landed_title = d_latin_constantinople
		OR = {
			NOT = { has_landed_title = b_hagiasophia }
			is_theocracy = no
			NOR = {
				religion = catholic
				religion = fraticelli
				religion = adoptionist
			}
		}
	}

	mean_time_to_happen = {
		days = 1
	}
	
	immediate = {
		d_latin_constantinople = { unsafe_destroy_landed_title = THIS }
	}
}

### Latin Patriachate of Alexandria

# Alexandria Re-Established
character_event = { 
	id = Plus.2216

	hide_window = yes
	religion_group = christian
	only_rulers = yes

	trigger = {
		has_landed_title = b_alexandria
		is_theocracy = yes
		NOT = { has_landed_title = d_latin_alexandria }
		OR = {
			religion = catholic
			religion = fraticelli
			religion = adoptionist
		}
		OR = {
			independent = yes
			top_liege = {
				higher_real_tier_than = DUKE
				religion = ROOT
			}
		}
	}

	mean_time_to_happen = {
		days = 1
	}
	
	immediate = {
		any_liege = {
			limit = { tier = EMPEROR }
			save_event_target_as = new_liege
		}
		any_liege = {
			limit = { tier = KING }
			save_event_target_as = new_liege
		}
		d_latin_alexandria = { grant_title = ROOT }
		set_defacto_liege = event_target:new_liege
	}
}

# Alexandria De-Established
character_event = {
	id = Plus.2217

	hide_window = yes
	only_playable = yes

	trigger = {
		has_landed_title = d_latin_alexandria
		OR = {
			NOT = { has_landed_title = b_alexandria }
			is_theocracy = no
			NOR = {
				religion = catholic
				religion = fraticelli
				religion = adoptionist
			}
		}
	}

	mean_time_to_happen = {
		days = 1
	}
	
	immediate = {
		d_latin_alexandria = { unsafe_destroy_landed_title = THIS }
	}
}

### Latin Patriarchate of Antioch

# Antioch Re-Established
character_event = { 
	id = Plus.2218

	hide_window = yes
	religion_group = christian
	only_rulers = yes

	trigger = {
		has_landed_title = b_antiocheia
		is_theocracy = yes
		NOT = { has_landed_title = d_latin_antioch }
		OR = {
			religion = catholic
			religion = fraticelli
			religion = adoptionist
		}
		OR = {
			independent = yes
			top_liege = {
				higher_real_tier_than = DUKE
				religion = ROOT
			}
		}
	}

	mean_time_to_happen = {
		days = 1
	}
	
	immediate = {
		any_liege = {
			limit = { tier = EMPEROR }
			save_event_target_as = new_liege
		}
		any_liege = {
			limit = { tier = KING }
			save_event_target_as = new_liege
		}
		d_latin_antioch = { grant_title = ROOT }
		set_defacto_liege = event_target:new_liege
	}
}

# Antioch De-Established
character_event = {
	id = Plus.2219

	hide_window = yes
	only_playable = yes

	trigger = {
		has_landed_title = d_latin_antioch
		OR = {
			NOT = { has_landed_title = b_antiocheia }
			is_theocracy = no
			NOR = {
				religion = catholic
				religion = fraticelli
				religion = adoptionist
			}
		}
	}

	mean_time_to_happen = {
		days = 1
	}
	
	immediate = {
		d_latin_antioch = { unsafe_destroy_landed_title = THIS }
	}
}

### Patriarchate of Jerusalem

# Jeusalem Re-Established
character_event = { 
	id = Plus.2220

	hide_window = yes
	religion_group = christian
	only_rulers = yes

	trigger = {
		has_landed_title = b_jerusalem
		is_theocracy = yes
		NOT = { has_landed_title = d_latin_jerusalem }
		OR = {
			religion = catholic
			religion = fraticelli
			religion = adoptionist
		}
		OR = {
			independent = yes
			top_liege = {
				higher_real_tier_than = DUKE
				religion = ROOT
			}
		}
	}

	mean_time_to_happen = {
		days = 1
	}
	
	immediate = {
		any_liege = {
			limit = { tier = EMPEROR }
			save_event_target_as = new_liege
		}
		any_liege = {
			limit = { tier = KING }
			save_event_target_as = new_liege
		}
		d_latin_jerusalem = { grant_title = ROOT }
		set_defacto_liege = event_target:new_liege
	}
}

# Jerusalem De-Established
character_event = {
	id = Plus.2221

	hide_window = yes
	only_playable = yes

	trigger = {
		has_landed_title = d_latin_jerusalem
		OR = {
			NOT = { has_landed_title = b_jerusalem }
			is_theocracy = no
			NOR = {
				religion = catholic
				religion = fraticelli
				religion = adoptionist
			}
		}
	}

	mean_time_to_happen = {
		days = 1
	}
	
	immediate = {
		d_latin_jerusalem = { unsafe_destroy_landed_title = THIS }
	}
}

# Restore Rome to the Pope
character_event = {
	id = Plus.2222

	hide_window = yes
	religion_group = christian
	only_playable = yes

	trigger = {
		OR = {
			has_landed_title = k_papal_state
			has_landed_title = d_fraticelli
		}
		NOT = { has_landed_title = b_roma }
		b_roma = {
			has_holder = yes
			holder_scope = {
				religion = ROOT
				ai = yes
				NOT = { character = ROOT }
			}
		}
	}

	mean_time_to_happen = {
		days = 1
	}
	
	immediate = {
		b_roma = { grant_title = ROOT }
	}
}


### MENDING THE GREAT SCHISM

# Ecumenical Council Called
narrative_event = {
	id = Plus.2230
	title = EVTNAME_Plus_2230
	desc = EVTDESC_Plus_2230
	picture = GFX_evt_great_schism
	border = GFX_event_narrative_frame_religion
	
	is_triggered_only = yes
	
	immediate = {
		save_event_target_as = council_holder
		capital_holding = { location = { save_event_target_as = council_location } }
		if = {
			limit = {
				OR = {
					religion = catholic
					religion = fraticelli
					religion = cathar
				}
			}
			any_title = {
				limit = {
					OR = {
						title = k_orthodox
						title = d_monothelite
						title = d_iconoclast
					}
					has_holder = yes
					holder_scope = { is_heretic = no }
				}
				holder_scope = {
					save_event_target_as = target_religion
				}
			}
		}
		if = {
			limit = {
				OR = {
					religion = orthodox
					religion = monothelite
					religion = iconoclast
				}
			}
			any_title = {
				limit = {
					OR = {
						title = k_papal_state
						title = d_fraticelli
						title = d_cathar
					}
					has_holder = yes
					holder_scope = { is_heretic = no }
				}
				holder_scope = {
					save_event_target_as = target_religion
				}
			}
		}
		if = {
			limit = { controls_religion = no }
			religion_head = { save_event_target_as = mender_religion }
		}
		if = {
			limit = { controls_religion = yes }
			save_event_target_as = mender_religion
		}
	}
	
	option = {
		name = EVTOPTA_Plus_2230
		set_global_flag = schism_mending
		add_character_modifier = {
			modifier = do_not_disturb
			hidden = yes
			duration = 30
		}
		hidden_tooltip = {
			any_demesne_title = {
				limit = {
					tier = COUNT
					location = { mend_schism_religion_trigger = yes }
				}
				location = { set_province_flag = change_religion }
			}
			any_courtier = {
				limit = {
					mend_schism_religion_trigger = yes
					NOT = { trait = zealous }
					is_ruler = no
					controls_religion = no
					mercenary = no
					holy_order = no
					can_change_religion = yes
				}
				religion = ROOT
			}
			any_vassal = {
				limit = {
					mend_schism_religion_trigger = yes
					NOT = { trait = zealous }
					is_playable = no
					controls_religion = no
					mercenary = no
					holy_order = no
					can_change_religion = yes
				}
				religion = ROOT
				any_courtier = {
					limit = {
						mend_schism_religion_trigger = yes
						NOT = { trait = zealous }
						is_ruler = no
						controls_religion = no
						mercenary = no
						holy_order = no
						can_change_religion = yes
					}
					religion = ROOT
				}
			}
			any_vassal = {
				limit = { is_playable = yes }
				narrative_event = { id = Plus.2231 days = 1 random = 4 } #choose whether to convert
			}
			any_independent_ruler = {
				limit = {
					is_playable = yes
					NOT = { character = ROOT }
				}
				narrative_event = { id = Plus.2231 days = 1 random = 4 } #choose whether to convert
			}
			event_target:council_location = {
				province_event = { id = Plus.2232 days = 30 } #council is over
			}
		}
	}
}

# Rulers informed about the Ecumenical Council - Convert or Not?
narrative_event = {
	id = Plus.2231
	title = EVTNAME_Plus_2230
	desc = EVTDESC_Plus_2230
	picture = GFX_evt_great_schism
	border = GFX_event_narrative_frame_religion
	
	is_triggered_only = yes
	hide_from = yes
	
	immediate = {
		any_vassal = {
			limit = { is_playable = yes }
			narrative_event = { id = Plus.2231 days = 1 random = 4 } #choose whether to convert
		}
	}
	
	option = {
		name = EVTOPTA_Plus_2231 # Convert
		trigger = {
			controls_religion = no
			mercenary = no
			holy_order = no
			can_change_religion = yes
			mend_schism_religion_trigger = yes
		}
		ai_chance = {
			factor = 75
			modifier = {
				factor = 0
				OR = {
					trait = zealous
					has_character_modifier = voice_of_jesus
					has_character_modifier = voice_of_satan
				}
			}
			modifier = {
				factor = 1.5
				trait = humble
			}
			modifier = {
				factor = 1.5
				trait = craven
			}
			modifier = {
				factor = 1.5
				trait = content
			}
			modifier = {
				factor = 1.5
				independent = no
				liege = { religion = event_target:mender_religion }
			}
		}
		religion = event_target:mender_religion
		any_demesne_title = {
			limit = {
				tier = COUNT
				location = { mend_schism_religion_trigger = yes }
			}
			location = { set_province_flag = change_religion }
		}
		any_courtier = {
			limit = {
				mend_schism_religion_trigger = yes
				NOT = { trait = zealous }
				is_ruler = no
				controls_religion = no
				mercenary = no
				holy_order = no
				can_change_religion = yes
			}
			religion = event_target:mender_religion
		}
		any_vassal = {
			limit = {
				mend_schism_religion_trigger = yes
				NOT = { trait = zealous }
				is_playable = no
				controls_religion = no
				mercenary = no
				holy_order = no
				can_change_religion = yes
			}
			religion = event_target:mender_religion
			any_courtier = {
				limit = {
					mend_schism_religion_trigger = yes
					NOT = { trait = zealous }
					is_ruler = no
					controls_religion = no
					mercenary = no
					holy_order = no
					can_change_religion = yes
				}
				religion = event_target:mender_religion
			}
		}
	}
	option = {
		name = EVTOPTB_Plus_2231 # Don't Convert
		trigger = {
			controls_religion = no
			mercenary = no
			holy_order = no
			can_change_religion = yes
			mend_schism_religion_trigger = yes
		}
		ai_chance = {
			factor = 25
			modifier = {
				factor = 0
				NOR = {
					trait = zealous
					trait = lunatic
					trait = proud
					trait = detached_priest
					trait = martial_cleric
					trait = scholarly_theologian
					trait = mastermind_theologian
					has_character_modifier = voice_of_jesus
					has_character_modifier = voice_of_satan
					capital_holding = { holding_type = temple }
					liege = { NOT = { religion = event_target:mender_religion } }
					real_tier = EMPEROR
				}
			}
			modifier = {
				factor = 0
				OR = {
					trait = cynical
					has_character_modifier = defied_church
				}
			}
			modifier = {
				factor = 3
				trait = lunatic
			}
			modifier = {
				factor = 1.5
				trait = proud
			}
			modifier = {
				factor = 1.5
				trait = brave
			}
			modifier = {
				factor = 1.5
				trait = detached_priest
			}
			modifier = {
				factor = 2
				trait = martial_cleric
			}
			modifier = {
				factor = 2.5
				trait = scholarly_theologian
			}
			modifier = {
				factor = 3
				trait = mastermind_theologian
			}
			modifier = {
				factor = 3
				independent = no
				liege = { NOT = { religion = event_target:mender_religion } }
			}
			modifier = {
				factor = 2
				independent = yes
				real_tier = KING
			}
			modifier = {
				factor = 3
				independent = yes
				real_tier = EMPEROR
			}
		}
		if = {
			limit = { NOT = { trait = zealous } }
			random = {
				chance = 25
				add_trait = zealous
			}
		}
	}
	option = {
		name = EVTOPTC_Plus_2231 # This is of great concern...
		trigger = {
			NAND = {
				controls_religion = no
				mercenary = no
				holy_order = no
				can_change_religion = yes
				mend_schism_religion_trigger = yes
			}
			NOT = { religion = event_target:mender_religion }
			religion_group = christian
		}
	}
	option = {
		name = {
			text = EVTOPTD_Plus_2231 # A wonderful day!
			trigger = { religion = event_target:mender_religion }
		}
		name = {
			text = EVTOPTE_Plus_2231 # Nothing to do with me
			trigger = {
				NAND = {
					controls_religion = no
					mercenary = no
					holy_order = no
					can_change_religion = yes
					mend_schism_religion_trigger = yes
				}
				NOT = { religion = event_target:mender_religion }
				NOT = { religion_group = christian }
			}
		}
		any_demesne_title = {
			limit = {
				tier = COUNT
				location = { mend_schism_religion_trigger = yes }
			}
			location = { set_province_flag = change_religion }
		}
		any_courtier = {
			limit = {
				mend_schism_religion_trigger = yes
				NOT = { trait = zealous }
				is_ruler = no
				controls_religion = no
				mercenary = no
				holy_order = no
				can_change_religion = yes
			}
			religion = event_target:mender_religion
		}
		any_vassal = {
			limit = {
				mend_schism_religion_trigger = yes
				NOT = { trait = zealous }
				is_playable = no
				controls_religion = no
				mercenary = no
				holy_order = no
				can_change_religion = yes
			}
			religion = event_target:mender_religion
			any_courtier = {
				limit = {
					mend_schism_religion_trigger = yes
					NOT = { trait = zealous }
					is_ruler = no
					controls_religion = no
					mercenary = no
					holy_order = no
					can_change_religion = yes
				}
				religion = event_target:mender_religion
			}
		}
	}
}

# Province bounce event
province_event = {
	id = Plus.2232
	
	is_triggered_only = yes
	hide_window = yes
	
	immediate = {
		owner = {
			narrative_event = { id = Plus.2233 }
		}
	}
}

# Ecumenical Council Over
narrative_event = {
	id = Plus.2233
	title = EVTNAME_Plus_2230
	desc = EVTDESC_Plus_2232
	picture = GFX_evt_great_schism
	border = GFX_event_narrative_frame_religion
	
	is_triggered_only = yes
	major = yes
	
	immediate = {
		clr_global_flag = schism_mending
		set_global_flag = schism_mended	
		event_target:mender_religion = {
			event_target:target_religion = {
				set_parent_religion = { religion = THIS parent = PREV }
			}
		}
		top_liege = {
			any_realm_province = {
				limit = { has_province_flag = change_religion }
				clr_province_flag = change_religion
				religion = event_target:mender_religion
			}
		}
		any_independent_ruler = {
			any_realm_province = {
				limit = { has_province_flag = change_religion }
				clr_province_flag = change_religion
				religion = event_target:mender_religion
			}
		}
	}
	
	option = {
		name = EVTOPTA_Plus_2232
		trigger = { religion = event_target:mender_religion }
		if = {
			limit = { character = event_target:council_holder }
			prestige = 1000
			set_character_flag = schism_mender
			give_nickname = nick_the_saint
		}
	}
	option = {
		name = EVTOPTB_Plus_2232
		trigger = {
			NOT = { religion = event_target:mender_religion }
			religion_group = christian
		}
	}
	option = {
		name = EVTOPTC_Plus_2232
		trigger = {
			NOT = { religion = event_target:mender_religion }
			NOT = { religion_group = christian }
		}
	}
}

### ENFORCING THE COUNCIL OF EPHESUS

# Ecumenical Council Called
narrative_event = {
	id = Plus.2234
	title = EVTNAME_Plus_2230
	desc = EVTDESC_Plus_2234
	picture = GFX_evt_ecumenical_council
	border = GFX_event_narrative_frame_religion
	
	is_triggered_only = yes
	
	immediate = {
		save_event_target_as = council_holder
		if = {
			limit = { controls_religion = no }
			random_realm_title = {
				limit = {
					tier = BARON
					holder_scope = { religion = ROOT }
					holding_type = temple
				}
				location = { save_event_target_as = council_location }
			}
		}
		if = {
			limit = { controls_religion = yes }
			capital_holding = { location = { save_event_target_as = council_location } }
		}
		d_nestorian = { holder_scope = { save_event_target_as = target_religion } }
		if = {
			limit = { controls_religion = no }
			religion_head = { save_event_target_as = mender_religion }
		}
		if = {
			limit = { controls_religion = yes }
			save_event_target_as = mender_religion
		}
	}
	
	option = {
		name = EVTOPTA_Plus_2230
		set_global_flag = enforcing_ephesus
		add_character_modifier = {
			modifier = do_not_disturb
			hidden = yes
			duration = 30
		}
		hidden_tooltip = {
			any_demesne_title = {
				limit = {
					tier = COUNT
					location = { religion = nestorian }
				}
				location = { set_province_flag = change_religion }
			}
			any_courtier = {
				limit = {
					religion = nestorian
					NOT = { trait = zealous }
					is_ruler = no
					controls_religion = no
					mercenary = no
					holy_order = no
					can_change_religion = yes
				}
				religion = ROOT
			}
			any_vassal = {
				limit = {
					religion = nestorian
					NOT = { trait = zealous }
					is_playable = no
					controls_religion = no
					mercenary = no
					holy_order = no
					can_change_religion = yes
				}
				religion = ROOT
				any_courtier = {
					limit = {
						religion = nestorian
						NOT = { trait = zealous }
						is_ruler = no
						controls_religion = no
						mercenary = no
						holy_order = no
						can_change_religion = yes
					}
					religion = ROOT
				}
			}
			any_vassal = {
				limit = { is_playable = yes }
				narrative_event = { id = Plus.2235 days = 1 random = 4 } #choose whether to convert
			}
			any_independent_ruler = {
				limit = {
					is_playable = yes
					NOT = { character = ROOT }
				}
				narrative_event = { id = Plus.2235 days = 1 random = 4 } #choose whether to convert
			}
			event_target:council_location = {
				province_event = { id = Plus.2236 days = 30 } #council is over
			}
		}
	}
}

# Rulers informed about the Ecumenical Council - Convert or Not?
narrative_event = {
	id = Plus.2235
	title = EVTNAME_Plus_2230
	desc = EVTDESC_Plus_2234
	picture = GFX_evt_ecumenical_council
	border = GFX_event_narrative_frame_religion
	
	is_triggered_only = yes
	hide_from = yes
	
	immediate = {
		any_vassal = {
			limit = { is_playable = yes }
			narrative_event = { id = Plus.2235 days = 1 random = 4 } #choose whether to convert
		}
	}
	
	option = {
		name = EVTOPTA_Plus_2231 # Convert
		trigger = {
			controls_religion = no
			mercenary = no
			holy_order = no
			can_change_religion = yes
			religion = nestorian
		}
		ai_chance = {
			factor = 75
			modifier = {
				factor = 0
				OR = {
					trait = zealous
					has_character_modifier = voice_of_jesus
					has_character_modifier = voice_of_satan
				}
			}
			modifier = {
				factor = 1.5
				trait = humble
			}
			modifier = {
				factor = 1.5
				trait = craven
			}
			modifier = {
				factor = 1.5
				trait = content
			}
			modifier = {
				factor = 1.5
				independent = no
				liege = { religion = event_target:mender_religion }
			}
		}
		religion = event_target:mender_religion
		any_demesne_title = {
			limit = {
				tier = COUNT
				location = { religion = nestorian }
			}
			location = { set_province_flag = change_religion }
		}
		any_courtier = {
			limit = {
				religion = nestorian
				NOT = { trait = zealous }
				is_ruler = no
				controls_religion = no
				mercenary = no
				holy_order = no
				can_change_religion = yes
			}
			religion = event_target:mender_religion
		}
		any_vassal = {
			limit = {
				religion = nestorian
				NOT = { trait = zealous }
				is_playable = no
				controls_religion = no
				mercenary = no
				holy_order = no
				can_change_religion = yes
			}
			religion = event_target:mender_religion
			any_courtier = {
				limit = {
					religion = nestorian
					NOT = { trait = zealous }
					is_ruler = no
					controls_religion = no
					mercenary = no
					holy_order = no
					can_change_religion = yes
				}
				religion = event_target:mender_religion
			}
		}
	}
	option = {
		name = EVTOPTB_Plus_2231 # Don't Convert
		trigger = {
			controls_religion = no
			mercenary = no
			holy_order = no
			can_change_religion = yes
			religion = nestorian
		}
		ai_chance = {
			factor = 25
			modifier = {
				factor = 0
				NOR = {
					trait = zealous
					trait = lunatic
					trait = proud
					trait = detached_priest
					trait = martial_cleric
					trait = scholarly_theologian
					trait = mastermind_theologian
					has_character_modifier = voice_of_jesus
					has_character_modifier = voice_of_satan
					capital_holding = { holding_type = temple }
					liege = { NOT = { religion = event_target:mender_religion } }
					real_tier = EMPEROR
				}
			}
			modifier = {
				factor = 0
				OR = {
					trait = cynical
					has_character_modifier = defied_church
				}
			}
			modifier = {
				factor = 3
				trait = lunatic
			}
			modifier = {
				factor = 1.5
				trait = proud
			}
			modifier = {
				factor = 1.5
				trait = brave
			}
			modifier = {
				factor = 1.5
				trait = detached_priest
			}
			modifier = {
				factor = 2
				trait = martial_cleric
			}
			modifier = {
				factor = 2.5
				trait = scholarly_theologian
			}
			modifier = {
				factor = 3
				trait = mastermind_theologian
			}
			modifier = {
				factor = 3
				independent = no
				liege = { NOT = { religion = event_target:mender_religion } }
			}
			modifier = {
				factor = 2
				independent = yes
				real_tier = KING
			}
			modifier = {
				factor = 3
				independent = yes
				real_tier = EMPEROR
			}
		}
		if = {
			limit = { NOT = { trait = zealous } }
			random = {
				chance = 25
				add_trait = zealous
			}
		}
	}
	option = {
		name = EVTOPTC_Plus_2231 # This is of great concern...
		trigger = {
			NAND = {
				controls_religion = no
				mercenary = no
				holy_order = no
				can_change_religion = yes
				religion = nestorian
			}
			NOT = { religion = event_target:mender_religion }
			religion_group = christian
		}
	}
	option = {
		name = {
			text = EVTOPTD_Plus_2231 # A wonderful day!
			trigger = { religion = event_target:mender_religion }
		}
		name = {
			text = EVTOPTE_Plus_2231 # Nothing to do with me
			trigger = {
				NAND = {
					controls_religion = no
					mercenary = no
					holy_order = no
					can_change_religion = yes
					religion = nestorian
				}
				NOT = { religion = event_target:mender_religion }
				NOT = { religion_group = christian }
			}
		}
		any_demesne_title = {
			limit = {
				tier = COUNT
				location = { religion = nestorian }
			}
			location = { set_province_flag = change_religion }
		}
		any_courtier = {
			limit = {
				religion = nestorian
				NOT = { trait = zealous }
				is_ruler = no
				controls_religion = no
				mercenary = no
				holy_order = no
				can_change_religion = yes
			}
			religion = event_target:mender_religion
		}
		any_vassal = {
			limit = {
				religion = nestorian
				NOT = { trait = zealous }
				is_playable = no
				controls_religion = no
				mercenary = no
				holy_order = no
				can_change_religion = yes
			}
			religion = event_target:mender_religion
			any_courtier = {
				limit = {
					religion = nestorian
					NOT = { trait = zealous }
					is_ruler = no
					controls_religion = no
					mercenary = no
					holy_order = no
					can_change_religion = yes
				}
				religion = event_target:mender_religion
			}
		}
	}
}

# Province bounce event
province_event = {
	id = Plus.2236
	
	is_triggered_only = yes
	hide_window = yes
	
	immediate = {
		owner = {
			narrative_event = { id = Plus.2237 }
		}
	}
}

# Ecumenical Council Over
narrative_event = {
	id = Plus.2237
	title = EVTNAME_Plus_2230
	desc = EVTDESC_Plus_2237
	picture = GFX_evt_ecumenical_council
	border = GFX_event_narrative_frame_religion
	
	is_triggered_only = yes
	major = yes
	
	immediate = {
		clr_global_flag = enforcing_ephesus
		set_global_flag = ephesus_enforced	
		event_target:mender_religion = {
			event_target:target_religion = {
				set_parent_religion = { religion = THIS parent = PREV }
			}
		}
		top_liege = {
			any_realm_province = {
				limit = { has_province_flag = change_religion }
				clr_province_flag = change_religion
				religion = event_target:mender_religion
			}
		}
		any_independent_ruler = {
			any_realm_province = {
				limit = { has_province_flag = change_religion }
				clr_province_flag = change_religion
				religion = event_target:mender_religion
			}
		}
	}
	
	option = {
		name = EVTOPTA_Plus_2232
		trigger = { religion = event_target:mender_religion }
		if = {
			limit = { character = event_target:council_holder }
			prestige = 1000
			set_character_flag = schism_mender
			give_nickname = nick_the_saint
		}
	}
	option = {
		name = EVTOPTB_Plus_2237
		trigger = {
			NOT = { religion = event_target:mender_religion }
			religion_group = christian
		}
	}
	option = {
		name = EVTOPTC_Plus_2237
		trigger = {
			NOT = { religion = event_target:mender_religion }
			NOT = { religion_group = christian }
		}
	}
}

### ENFORCING THE COUNCIL OF CHALCEDON

# Ecumenical Council Called
narrative_event = {
	id = Plus.2238
	title = EVTNAME_Plus_2230
	desc = EVTDESC_Plus_2238
	picture = GFX_evt_ecumenical_council
	border = GFX_event_narrative_frame_religion
	
	is_triggered_only = yes
	
	immediate = {
		save_event_target_as = council_holder
		if = {
			limit = { controls_religion = no }
			random_realm_title = {
				limit = {
					tier = BARON
					holder_scope = { religion = ROOT }
					holding_type = temple
				}
				location = { save_event_target_as = council_location }
			}
		}
		if = {
			limit = { controls_religion = yes }
			capital_holding = { location = { save_event_target_as = council_location } }
		}
		if = {
			limit = { d_miaphysite = { holder_scope = { is_heretic = no } } }
			d_miaphysite = { holder_scope = { save_event_target_as = target_religion1 } }
		}
		if = {
			limit = { d_monophysite = { holder_scope = { is_heretic = no } } }
			d_monophysite = { holder_scope = { save_event_target_as = target_religion1 } }
		}
		if = {
			limit = { d_apostolic = { holder_scope = { is_heretic = no } } }
			d_apostolic = { holder_scope = { save_event_target_as = target_religion2 } }
		}
		if = {
			limit = { d_paulician = { holder_scope = { is_heretic = no } } }
			d_paulician = { holder_scope = { save_event_target_as = target_religion2 } }
		}
		if = {
			limit = { controls_religion = no }
			religion_head = { save_event_target_as = mender_religion }
		}
		if = {
			limit = { controls_religion = yes }
			save_event_target_as = mender_religion
		}
	}
	
	option = {
		name = EVTOPTA_Plus_2230
		set_global_flag = enforcing_chalcedon
		add_character_modifier = {
			modifier = do_not_disturb
			hidden = yes
			duration = 30
		}
		hidden_tooltip = {
			any_demesne_title = {
				limit = {
					tier = COUNT
					location = { enforce_ephesus_religion_trigger = yes }
				}
				location = { set_province_flag = change_religion }
			}
			any_courtier = {
				limit = {
					enforce_ephesus_religion_trigger = yes
					NOT = { trait = zealous }
					is_ruler = no
					controls_religion = no
					mercenary = no
					holy_order = no
					can_change_religion = yes
				}
				religion = ROOT
			}
			any_vassal = {
				limit = {
					enforce_ephesus_religion_trigger = yes
					NOT = { trait = zealous }
					is_playable = no
					controls_religion = no
					mercenary = no
					holy_order = no
					can_change_religion = yes
				}
				religion = ROOT
				any_courtier = {
					limit = {
						enforce_ephesus_religion_trigger = yes
						NOT = { trait = zealous }
						is_ruler = no
						controls_religion = no
						mercenary = no
						holy_order = no
						can_change_religion = yes
					}
					religion = ROOT
				}
			}
			any_vassal = {
				limit = { is_playable = yes }
				narrative_event = { id = Plus.2239 days = 1 random = 4 } #choose whether to convert
			}
			any_independent_ruler = {
				limit = {
					is_playable = yes
					NOT = { character = ROOT }
				}
				narrative_event = { id = Plus.2239 days = 1 random = 4 } #choose whether to convert
			}
			event_target:council_location = {
				province_event = { id = Plus.2240 days = 30 } #council is over
			}
		}
	}
}

# Rulers informed about the Ecumenical Council - Convert or Not?
narrative_event = {
	id = Plus.2239
	title = EVTNAME_Plus_2230
	desc = EVTDESC_Plus_2238
	picture = GFX_evt_ecumenical_council
	border = GFX_event_narrative_frame_religion
	
	is_triggered_only = yes
	hide_from = yes
	
	immediate = {
		any_vassal = {
			limit = { is_playable = yes }
			narrative_event = { id = Plus.2239 days = 1 random = 4 } #choose whether to convert
		}
	}
	
	option = {
		name = EVTOPTA_Plus_2231 # Convert
		trigger = {
			controls_religion = no
			mercenary = no
			holy_order = no
			can_change_religion = yes
			enforce_ephesus_religion_trigger = yes
		}
		ai_chance = {
			factor = 75
			modifier = {
				factor = 0
				OR = {
					trait = zealous
					has_character_modifier = voice_of_jesus
					has_character_modifier = voice_of_satan
				}
			}
			modifier = {
				factor = 1.5
				trait = humble
			}
			modifier = {
				factor = 1.5
				trait = craven
			}
			modifier = {
				factor = 1.5
				trait = content
			}
			modifier = {
				factor = 1.5
				independent = no
				liege = { religion = event_target:mender_religion }
			}
		}
		religion = event_target:mender_religion
		any_demesne_title = {
			limit = {
				tier = COUNT
				location = { enforce_ephesus_religion_trigger = yes }
			}
			location = { set_province_flag = change_religion }
		}
		any_courtier = {
			limit = {
				enforce_ephesus_religion_trigger = yes
				NOT = { trait = zealous }
				is_ruler = no
				controls_religion = no
				mercenary = no
				holy_order = no
				can_change_religion = yes
			}
			religion = event_target:mender_religion
		}
		any_vassal = {
			limit = {
				enforce_ephesus_religion_trigger = yes
				NOT = { trait = zealous }
				is_playable = no
				controls_religion = no
				mercenary = no
				holy_order = no
				can_change_religion = yes
			}
			religion = event_target:mender_religion
			any_courtier = {
				limit = {
					enforce_ephesus_religion_trigger = yes
					NOT = { trait = zealous }
					is_ruler = no
					controls_religion = no
					mercenary = no
					holy_order = no
					can_change_religion = yes
				}
				religion = event_target:mender_religion
			}
		}
	}
	option = {
		name = EVTOPTB_Plus_2231 # Don't Convert
		trigger = {
			controls_religion = no
			mercenary = no
			holy_order = no
			can_change_religion = yes
			enforce_ephesus_religion_trigger = yes
		}
		ai_chance = {
			factor = 25
			modifier = {
				factor = 0
				NOR = {
					trait = zealous
					trait = lunatic
					trait = proud
					trait = detached_priest
					trait = martial_cleric
					trait = scholarly_theologian
					trait = mastermind_theologian
					has_character_modifier = voice_of_jesus
					has_character_modifier = voice_of_satan
					capital_holding = { holding_type = temple }
					liege = { NOT = { religion = event_target:mender_religion } }
					real_tier = EMPEROR
				}
			}
			modifier = {
				factor = 0
				OR = {
					trait = cynical
					has_character_modifier = defied_church
				}
			}
			modifier = {
				factor = 3
				trait = lunatic
			}
			modifier = {
				factor = 1.5
				trait = proud
			}
			modifier = {
				factor = 1.5
				trait = brave
			}
			modifier = {
				factor = 1.5
				trait = detached_priest
			}
			modifier = {
				factor = 2
				trait = martial_cleric
			}
			modifier = {
				factor = 2.5
				trait = scholarly_theologian
			}
			modifier = {
				factor = 3
				trait = mastermind_theologian
			}
			modifier = {
				factor = 3
				independent = no
				liege = { NOT = { religion = event_target:mender_religion } }
			}
			modifier = {
				factor = 2
				independent = yes
				real_tier = KING
			}
			modifier = {
				factor = 3
				independent = yes
				real_tier = EMPEROR
			}
		}
		if = {
			limit = { NOT = { trait = zealous } }
			random = {
				chance = 25
				add_trait = zealous
			}
		}
	}
	option = {
		name = EVTOPTC_Plus_2231 # This is of great concern...
		trigger = {
			NAND = {
				controls_religion = no
				mercenary = no
				holy_order = no
				can_change_religion = yes
				enforce_ephesus_religion_trigger = yes
			}
			NOT = { religion = event_target:mender_religion }
			religion_group = christian
		}
	}
	option = {
		name = {
			text = EVTOPTD_Plus_2231 # A wonderful day!
			trigger = { religion = event_target:mender_religion }
		}
		name = {
			text = EVTOPTE_Plus_2231 # Nothing to do with me
			trigger = {
				NAND = {
					controls_religion = no
					mercenary = no
					holy_order = no
					can_change_religion = yes
					enforce_ephesus_religion_trigger = yes
				}
				NOT = { religion = event_target:mender_religion }
				NOT = { religion_group = christian }
			}
		}
		any_demesne_title = {
			limit = {
				tier = COUNT
				location = { enforce_ephesus_religion_trigger = yes }
			}
			location = { set_province_flag = change_religion }
		}
		any_courtier = {
			limit = {
				enforce_ephesus_religion_trigger = yes
				NOT = { trait = zealous }
				is_ruler = no
				controls_religion = no
				mercenary = no
				holy_order = no
				can_change_religion = yes
			}
			religion = event_target:mender_religion
		}
		any_vassal = {
			limit = {
				enforce_ephesus_religion_trigger = yes
				NOT = { trait = zealous }
				is_playable = no
				controls_religion = no
				mercenary = no
				holy_order = no
				can_change_religion = yes
			}
			religion = event_target:mender_religion
			any_courtier = {
				limit = {
					enforce_ephesus_religion_trigger = yes
					NOT = { trait = zealous }
					is_ruler = no
					controls_religion = no
					mercenary = no
					holy_order = no
					can_change_religion = yes
				}
				religion = event_target:mender_religion
			}
		}
	}
}

# Province bounce event
province_event = {
	id = Plus.2240
	
	is_triggered_only = yes
	hide_window = yes
	
	immediate = {
		owner = {
			narrative_event = { id = Plus.2241 }
		}
	}
}

# Ecumenical Council Over
narrative_event = {
	id = Plus.2241
	title = EVTNAME_Plus_2230
	desc = EVTDESC_Plus_2241
	picture = GFX_evt_ecumenical_council
	border = GFX_event_narrative_frame_religion
	
	is_triggered_only = yes
	major = yes
	
	immediate = {
		clr_global_flag = enforcing_chalcedon
		set_global_flag = chalcedon_enforced	
		event_target:mender_religion = {
			event_target:target_religion1 = {
				set_parent_religion = { religion = THIS parent = PREV }
			}
		}
		event_target:mender_religion = {
			event_target:target_religion2 = {
				set_parent_religion = { religion = THIS parent = PREV }
			}
		}
		top_liege = {
			any_realm_province = {
				limit = { has_province_flag = change_religion }
				clr_province_flag = change_religion
				religion = event_target:mender_religion
			}
		}
		any_independent_ruler = {
			any_realm_province = {
				limit = { has_province_flag = change_religion }
				clr_province_flag = change_religion
				religion = event_target:mender_religion
			}
		}
	}
	
	option = {
		name = EVTOPTA_Plus_2232
		trigger = { religion = event_target:mender_religion }
		if = {
			limit = { character = event_target:council_holder }
			prestige = 1000
			set_character_flag = schism_mender
			give_nickname = nick_the_saint
		}
	}
	option = {
		name = EVTOPTB_Plus_2238
		trigger = {
			NOT = { religion = event_target:mender_religion }
			religion_group = christian
		}
	}
	option = {
		name = EVTOPTC_Plus_2237
		trigger = {
			NOT = { religion = event_target:mender_religion }
			NOT = { religion_group = christian }
		}
	}
}

### REPUDIATING THE COUNCIL OF EPHESUS

# Ecumenical Council Called
narrative_event = {
	id = Plus.2242
	title = EVTNAME_Plus_2230
	desc = EVTDESC_Plus_2242
	picture = GFX_evt_ecumenical_council
	border = GFX_event_narrative_frame_religion
	
	is_triggered_only = yes
	
	immediate = {
		save_event_target_as = council_holder
		if = {
			limit = { controls_religion = no }
			random_realm_title = {
				limit = {
					tier = BARON
					holder_scope = { religion = ROOT }
					holding_type = temple
				}
				location = { save_event_target_as = council_location }
			}
		}
		if = {
			limit = { controls_religion = yes }
			capital_holding = { location = { save_event_target_as = council_location } }
		}
		any_title = {
			limit = {
				OR = {
					title = k_orthodox
					title = d_monothelite
					title = d_iconoclast
				}
				has_holder = yes
				holder_scope = { is_heretic = no }
			}
			holder_scope = {
				save_event_target_as = target_religion
			}
		}
		if = {
			limit = { controls_religion = no }
			religion_head = { save_event_target_as = mender_religion }
		}
		if = {
			limit = { controls_religion = yes }
			save_event_target_as = mender_religion
		}
	}
	
	option = {
		name = EVTOPTA_Plus_2230
		set_global_flag = repudiating_ephesus
		add_character_modifier = {
			modifier = do_not_disturb
			hidden = yes
			duration = 30
		}
		hidden_tooltip = {
			any_demesne_title = {
				limit = {
					tier = COUNT
					location = { repudiate_ephesus_religion_trigger = yes }
				}
				location = { set_province_flag = change_religion }
			}
			any_courtier = {
				limit = {
					repudiate_ephesus_religion_trigger = yes
					NOT = { trait = zealous }
					is_ruler = no
					controls_religion = no
					mercenary = no
					holy_order = no
					can_change_religion = yes
				}
				religion = ROOT
			}
			any_vassal = {
				limit = {
					repudiate_ephesus_religion_trigger = yes
					NOT = { trait = zealous }
					is_playable = no
					controls_religion = no
					mercenary = no
					holy_order = no
					can_change_religion = yes
				}
				religion = ROOT
				any_courtier = {
					limit = {
						repudiate_ephesus_religion_trigger = yes
						NOT = { trait = zealous }
						is_ruler = no
						controls_religion = no
						mercenary = no
						holy_order = no
						can_change_religion = yes
					}
					religion = ROOT
				}
			}
			any_vassal = {
				limit = { is_playable = yes }
				narrative_event = { id = Plus.2243 days = 1 random = 4 } #choose whether to convert
			}
			any_independent_ruler = {
				limit = {
					is_playable = yes
					NOT = { character = ROOT }
				}
				narrative_event = { id = Plus.2243 days = 1 random = 4 } #choose whether to convert
			}
			event_target:council_location = {
				province_event = { id = Plus.2244 days = 30 } #council is over
			}
		}
	}
}

# Rulers informed about the Ecumenical Council - Convert or Not?
narrative_event = {
	id = Plus.2243
	title = EVTNAME_Plus_2230
	desc = EVTDESC_Plus_2242
	picture = GFX_evt_ecumenical_council
	border = GFX_event_narrative_frame_religion
	
	is_triggered_only = yes
	hide_from = yes
	
	immediate = {
		any_vassal = {
			limit = { is_playable = yes }
			narrative_event = { id = Plus.2243 days = 1 random = 4 } #choose whether to convert
		}
	}
	
	option = {
		name = EVTOPTA_Plus_2231 # Convert
		trigger = {
			controls_religion = no
			mercenary = no
			holy_order = no
			can_change_religion = yes
			repudiate_ephesus_religion_trigger = yes
		}
		ai_chance = {
			factor = 75
			modifier = {
				factor = 0
				OR = {
					trait = zealous
					has_character_modifier = voice_of_jesus
					has_character_modifier = voice_of_satan
				}
			}
			modifier = {
				factor = 1.5
				trait = humble
			}
			modifier = {
				factor = 1.5
				trait = craven
			}
			modifier = {
				factor = 1.5
				trait = content
			}
			modifier = {
				factor = 1.5
				independent = no
				liege = { religion = event_target:mender_religion }
			}
		}
		religion = event_target:mender_religion
		any_demesne_title = {
			limit = {
				tier = COUNT
				location = { repudiate_ephesus_religion_trigger = yes }
			}
			location = { set_province_flag = change_religion }
		}
		any_courtier = {
			limit = {
				repudiate_ephesus_religion_trigger = yes
				NOT = { trait = zealous }
				is_ruler = no
				controls_religion = no
				mercenary = no
				holy_order = no
				can_change_religion = yes
			}
			religion = event_target:mender_religion
		}
		any_vassal = {
			limit = {
				repudiate_ephesus_religion_trigger = yes
				NOT = { trait = zealous }
				is_playable = no
				controls_religion = no
				mercenary = no
				holy_order = no
				can_change_religion = yes
			}
			religion = event_target:mender_religion
			any_courtier = {
				limit = {
					repudiate_ephesus_religion_trigger = yes
					NOT = { trait = zealous }
					is_ruler = no
					controls_religion = no
					mercenary = no
					holy_order = no
					can_change_religion = yes
				}
				religion = event_target:mender_religion
			}
		}
	}
	option = {
		name = EVTOPTB_Plus_2231 # Don't Convert
		trigger = {
			controls_religion = no
			mercenary = no
			holy_order = no
			can_change_religion = yes
			repudiate_ephesus_religion_trigger = yes
		}
		ai_chance = {
			factor = 25
			modifier = {
				factor = 0
				NOR = {
					trait = zealous
					trait = lunatic
					trait = proud
					trait = detached_priest
					trait = martial_cleric
					trait = scholarly_theologian
					trait = mastermind_theologian
					has_character_modifier = voice_of_jesus
					has_character_modifier = voice_of_satan
					capital_holding = { holding_type = temple }
					liege = { NOT = { religion = event_target:mender_religion } }
					real_tier = EMPEROR
				}
			}
			modifier = {
				factor = 0
				OR = {
					trait = cynical
					has_character_modifier = defied_church
				}
			}
			modifier = {
				factor = 3
				trait = lunatic
			}
			modifier = {
				factor = 1.5
				trait = proud
			}
			modifier = {
				factor = 1.5
				trait = brave
			}
			modifier = {
				factor = 1.5
				trait = detached_priest
			}
			modifier = {
				factor = 2
				trait = martial_cleric
			}
			modifier = {
				factor = 2.5
				trait = scholarly_theologian
			}
			modifier = {
				factor = 3
				trait = mastermind_theologian
			}
			modifier = {
				factor = 3
				independent = no
				liege = { NOT = { religion = event_target:mender_religion } }
			}
			modifier = {
				factor = 2
				independent = yes
				real_tier = KING
			}
			modifier = {
				factor = 3
				independent = yes
				real_tier = EMPEROR
			}
		}
		if = {
			limit = { NOT = { trait = zealous } }
			random = {
				chance = 25
				add_trait = zealous
			}
		}
	}
	option = {
		name = EVTOPTC_Plus_2231 # This is of great concern...
		trigger = {
			NAND = {
				controls_religion = no
				mercenary = no
				holy_order = no
				can_change_religion = yes
				repudiate_ephesus_religion_trigger = yes
			}
			NOT = { religion = event_target:mender_religion }
			religion_group = christian
		}
	}
	option = {
		name = {
			text = EVTOPTD_Plus_2231 # A wonderful day!
			trigger = { religion = event_target:mender_religion }
		}
		name = {
			text = EVTOPTE_Plus_2231 # Nothing to do with me
			trigger = {
				NAND = {
					controls_religion = no
					mercenary = no
					holy_order = no
					can_change_religion = yes
					repudiate_ephesus_religion_trigger = yes
				}
				NOT = { religion = event_target:mender_religion }
				NOT = { religion_group = christian }
			}
		}
		any_demesne_title = {
			limit = {
				tier = COUNT
				location = { repudiate_ephesus_religion_trigger = yes }
			}
			location = { set_province_flag = change_religion }
		}
		any_courtier = {
			limit = {
				repudiate_ephesus_religion_trigger = yes
				NOT = { trait = zealous }
				is_ruler = no
				controls_religion = no
				mercenary = no
				holy_order = no
				can_change_religion = yes
			}
			religion = event_target:mender_religion
		}
		any_vassal = {
			limit = {
				repudiate_ephesus_religion_trigger = yes
				NOT = { trait = zealous }
				is_playable = no
				controls_religion = no
				mercenary = no
				holy_order = no
				can_change_religion = yes
			}
			religion = event_target:mender_religion
			any_courtier = {
				limit = {
					repudiate_ephesus_religion_trigger = yes
					NOT = { trait = zealous }
					is_ruler = no
					controls_religion = no
					mercenary = no
					holy_order = no
					can_change_religion = yes
				}
				religion = event_target:mender_religion
			}
		}
	}
}

# Province bounce event
province_event = {
	id = Plus.2244
	
	is_triggered_only = yes
	hide_window = yes
	
	immediate = {
		owner = {
			narrative_event = { id = Plus.2245 }
		}
	}
}

# Ecumenical Council Over
narrative_event = {
	id = Plus.2245
	title = EVTNAME_Plus_2230
	desc = EVTDESC_Plus_2245
	picture = GFX_evt_ecumenical_council
	border = GFX_event_narrative_frame_religion
	
	is_triggered_only = yes
	major = yes
	
	immediate = {
		clr_global_flag = repudiating_ephesus
		set_global_flag = ephesus_repudiated	
		event_target:mender_religion = {
			event_target:target_religion = {
				set_parent_religion = { religion = THIS parent = PREV }
			}
		}
		top_liege = {
			any_realm_province = {
				limit = { has_province_flag = change_religion }
				clr_province_flag = change_religion
				religion = event_target:mender_religion
			}
		}
		any_independent_ruler = {
			any_realm_province = {
				limit = { has_province_flag = change_religion }
				clr_province_flag = change_religion
				religion = event_target:mender_religion
			}
		}
	}
	
	option = {
		name = EVTOPTA_Plus_2232
		trigger = { religion = event_target:mender_religion }
		if = {
			limit = { character = event_target:council_holder }
			prestige = 1000
			set_character_flag = schism_mender
			give_nickname = nick_the_saint
		}
	}
	option = {
		name = EVTOPTB_Plus_2245
		trigger = {
			NOT = { religion = event_target:mender_religion }
			religion_group = christian
		}
	}
	option = {
		name = EVTOPTC_Plus_2245
		trigger = {
			NOT = { religion = event_target:mender_religion }
			NOT = { religion_group = christian }
		}
	}
}

### REPUDIATING THE COUNCIL OF CHALCEDON

# Ecumenical Council Called
narrative_event = {
	id = Plus.2246
	title = EVTNAME_Plus_2230
	picture = GFX_evt_ecumenical_council
	border = GFX_event_narrative_frame_religion
	
	desc = {
		text = EVTDESC_Plus_2246
		trigger = { event_target:target_religion2 = { is_alive = yes } }
	}
	desc = {
		text = EVTDESC_Plus_2246_no_second
		trigger = { NOT = { event_target:target_religion2 = { is_alive = yes } } }
	}
	
	is_triggered_only = yes
	
	immediate = {
		save_event_target_as = council_holder
		if = {
			limit = { controls_religion = no }
			random_realm_title = {
				limit = {
					tier = BARON
					holder_scope = { religion = ROOT }
					holding_type = temple
				}
				location = { save_event_target_as = council_location }
			}
		}
		if = {
			limit = { controls_religion = yes }
			capital_holding = { location = { save_event_target_as = council_location } }
		}
		any_title = {
			limit = {
				OR = {
					title = k_orthodox
					title = d_monothelite
					title = d_iconoclast
				}
				has_holder = yes
				holder_scope = { is_heretic = no }
			}
			holder_scope = {
				save_event_target_as = target_religion1
			}
		}
		if = {
			limit = {
				OR = {
					religion = miaphysite
					religion = monophysite
				}
			}
			any_title = {
				limit = {
					OR = {
						title = d_apostolic
						title = d_paulician
					}
					has_holder = yes
					holder_scope = { is_heretic = no }
				}
				holder_scope = {
					save_event_target_as = target_religion2
				}
			}
		}
		if = {
			limit = {
				OR = {
					religion = apostolic
					religion = paulician
				}
			}
			any_title = {
				limit = {
					OR = {
						title = d_miaphysite
						title = d_monophysite
					}
					has_holder = yes
					holder_scope = { is_heretic = no }
				}
				holder_scope = {
					save_event_target_as = target_religion2
				}
			}
		}
		if = {
			limit = { controls_religion = no }
			religion_head = { save_event_target_as = mender_religion }
		}
		if = {
			limit = { controls_religion = yes }
			save_event_target_as = mender_religion
		}
	}
	
	option = {
		name = EVTOPTA_Plus_2230
		set_global_flag = repudiating_chalcedon
		add_character_modifier = {
			modifier = do_not_disturb
			hidden = yes
			duration = 30
		}
		hidden_tooltip = {
			any_demesne_title = {
				limit = {
					tier = COUNT
					location = { repudiate_chalcedon_religion_trigger = yes }
				}
				location = { set_province_flag = change_religion }
			}
			any_courtier = {
				limit = {
					repudiate_chalcedon_religion_trigger = yes
					NOT = { trait = zealous }
					is_ruler = no
					controls_religion = no
					mercenary = no
					holy_order = no
					can_change_religion = yes
				}
				religion = ROOT
			}
			any_vassal = {
				limit = {
					repudiate_chalcedon_religion_trigger = yes
					NOT = { trait = zealous }
					is_playable = no
					controls_religion = no
					mercenary = no
					holy_order = no
					can_change_religion = yes
				}
				religion = ROOT
				any_courtier = {
					limit = {
						repudiate_chalcedon_religion_trigger = yes
						NOT = { trait = zealous }
						is_ruler = no
						controls_religion = no
						mercenary = no
						holy_order = no
						can_change_religion = yes
					}
					religion = ROOT
				}
			}
			any_vassal = {
				limit = { is_playable = yes }
				narrative_event = { id = Plus.2247 days = 1 random = 4 } #choose whether to convert
			}
			any_independent_ruler = {
				limit = {
					is_playable = yes
					NOT = { character = ROOT }
				}
				narrative_event = { id = Plus.2247 days = 1 random = 4 } #choose whether to convert
			}
			event_target:council_location = {
				province_event = { id = Plus.2248 days = 30 } #council is over
			}
		}
	}
}

# Rulers informed about the Ecumenical Council - Convert or Not?
narrative_event = {
	id = Plus.2247
	title = EVTNAME_Plus_2230
	desc = EVTDESC_Plus_2246
	picture = GFX_evt_ecumenical_council
	border = GFX_event_narrative_frame_religion
	
	is_triggered_only = yes
	hide_from = yes
	
	immediate = {
		any_vassal = {
			limit = { is_playable = yes }
			narrative_event = { id = Plus.2247 days = 1 random = 4 } #choose whether to convert
		}
	}
	
	option = {
		name = EVTOPTA_Plus_2231 # Convert
		trigger = {
			controls_religion = no
			mercenary = no
			holy_order = no
			can_change_religion = yes
			repudiate_chalcedon_religion_trigger = yes
		}
		ai_chance = {
			factor = 75
			modifier = {
				factor = 0
				OR = {
					trait = zealous
					has_character_modifier = voice_of_jesus
					has_character_modifier = voice_of_satan
				}
			}
			modifier = {
				factor = 1.5
				trait = humble
			}
			modifier = {
				factor = 1.5
				trait = craven
			}
			modifier = {
				factor = 1.5
				trait = content
			}
			modifier = {
				factor = 1.5
				independent = no
				liege = { religion = event_target:mender_religion }
			}
		}
		religion = event_target:mender_religion
		any_demesne_title = {
			limit = {
				tier = COUNT
				location = { repudiate_chalcedon_religion_trigger = yes }
			}
			location = { set_province_flag = change_religion }
		}
		any_courtier = {
			limit = {
				repudiate_chalcedon_religion_trigger = yes
				NOT = { trait = zealous }
				is_ruler = no
				controls_religion = no
				mercenary = no
				holy_order = no
				can_change_religion = yes
			}
			religion = event_target:mender_religion
		}
		any_vassal = {
			limit = {
				repudiate_chalcedon_religion_trigger = yes
				NOT = { trait = zealous }
				is_playable = no
				controls_religion = no
				mercenary = no
				holy_order = no
				can_change_religion = yes
			}
			religion = event_target:mender_religion
			any_courtier = {
				limit = {
					repudiate_chalcedon_religion_trigger = yes
					NOT = { trait = zealous }
					is_ruler = no
					controls_religion = no
					mercenary = no
					holy_order = no
					can_change_religion = yes
				}
				religion = event_target:mender_religion
			}
		}
	}
	option = {
		name = EVTOPTB_Plus_2231 # Don't Convert
		trigger = {
			controls_religion = no
			mercenary = no
			holy_order = no
			can_change_religion = yes
			repudiate_chalcedon_religion_trigger = yes
		}
		ai_chance = {
			factor = 25
			modifier = {
				factor = 0
				NOR = {
					trait = zealous
					trait = lunatic
					trait = proud
					trait = detached_priest
					trait = martial_cleric
					trait = scholarly_theologian
					trait = mastermind_theologian
					has_character_modifier = voice_of_jesus
					has_character_modifier = voice_of_satan
					capital_holding = { holding_type = temple }
					liege = { NOT = { religion = event_target:mender_religion } }
					real_tier = EMPEROR
				}
			}
			modifier = {
				factor = 0
				OR = {
					trait = cynical
					has_character_modifier = defied_church
				}
			}
			modifier = {
				factor = 3
				trait = lunatic
			}
			modifier = {
				factor = 1.5
				trait = proud
			}
			modifier = {
				factor = 1.5
				trait = brave
			}
			modifier = {
				factor = 1.5
				trait = detached_priest
			}
			modifier = {
				factor = 2
				trait = martial_cleric
			}
			modifier = {
				factor = 2.5
				trait = scholarly_theologian
			}
			modifier = {
				factor = 3
				trait = mastermind_theologian
			}
			modifier = {
				factor = 3
				independent = no
				liege = { NOT = { religion = event_target:mender_religion } }
			}
			modifier = {
				factor = 2
				independent = yes
				real_tier = KING
			}
			modifier = {
				factor = 3
				independent = yes
				real_tier = EMPEROR
			}
		}
		if = {
			limit = { NOT = { trait = zealous } }
			random = {
				chance = 25
				add_trait = zealous
			}
		}
	}
	option = {
		name = EVTOPTC_Plus_2231 # This is of great concern...
		trigger = {
			NAND = {
				controls_religion = no
				mercenary = no
				holy_order = no
				can_change_religion = yes
				repudiate_chalcedon_religion_trigger = yes
			}
			NOT = { religion = event_target:mender_religion }
			religion_group = christian
		}
	}
	option = {
		name = {
			text = EVTOPTD_Plus_2231 # A wonderful day!
			trigger = { religion = event_target:mender_religion }
		}
		name = {
			text = EVTOPTE_Plus_2231 # Nothing to do with me
			trigger = {
				NAND = {
					controls_religion = no
					mercenary = no
					holy_order = no
					can_change_religion = yes
					repudiate_chalcedon_religion_trigger = yes
				}
				NOT = { religion = event_target:mender_religion }
				NOT = { religion_group = christian }
			}
		}
		any_demesne_title = {
			limit = {
				tier = COUNT
				location = { repudiate_chalcedon_religion_trigger = yes }
			}
			location = { set_province_flag = change_religion }
		}
		any_courtier = {
			limit = {
				repudiate_chalcedon_religion_trigger = yes
				NOT = { trait = zealous }
				is_ruler = no
				controls_religion = no
				mercenary = no
				holy_order = no
				can_change_religion = yes
			}
			religion = event_target:mender_religion
		}
		any_vassal = {
			limit = {
				repudiate_chalcedon_religion_trigger = yes
				NOT = { trait = zealous }
				is_playable = no
				controls_religion = no
				mercenary = no
				holy_order = no
				can_change_religion = yes
			}
			religion = event_target:mender_religion
			any_courtier = {
				limit = {
					repudiate_chalcedon_religion_trigger = yes
					NOT = { trait = zealous }
					is_ruler = no
					controls_religion = no
					mercenary = no
					holy_order = no
					can_change_religion = yes
				}
				religion = event_target:mender_religion
			}
		}
	}
}

# Province bounce event
province_event = {
	id = Plus.2248
	
	is_triggered_only = yes
	hide_window = yes
	
	immediate = {
		owner = {
			narrative_event = { id = Plus.2249 }
		}
	}
}

# Ecumenical Council Over
narrative_event = {
	id = Plus.2249
	title = EVTNAME_Plus_2230
	desc = EVTDESC_Plus_2249
	picture = GFX_evt_ecumenical_council
	border = GFX_event_narrative_frame_religion
	
	is_triggered_only = yes
	major = yes
	
	immediate = {
		clr_global_flag = repudiating_chalcedon
		set_global_flag = chalcedon_repudiated	
		event_target:mender_religion = {
			event_target:target_religion1 = {
				set_parent_religion = { religion = THIS parent = PREV }
			}
		}
		event_target:mender_religion = {
			event_target:target_religion2 = {
				set_parent_religion = { religion = THIS parent = PREV }
			}
		}
		top_liege = {
			any_realm_province = {
				limit = { has_province_flag = change_religion }
				clr_province_flag = change_religion
				religion = event_target:mender_religion
			}
		}
		any_independent_ruler = {
			any_realm_province = {
				limit = { has_province_flag = change_religion }
				clr_province_flag = change_religion
				religion = event_target:mender_religion
			}
		}
	}
	
	option = {
		name = EVTOPTA_Plus_2232
		trigger = { religion = event_target:mender_religion }
		if = {
			limit = { character = event_target:council_holder }
			prestige = 1000
			set_character_flag = schism_mender
			give_nickname = nick_the_saint
		}
	}
	option = {
		name = EVTOPTB_Plus_2245
		trigger = {
			NOT = { religion = event_target:mender_religion }
			religion_group = christian
		}
	}
	option = {
		name = EVTOPTC_Plus_2245
		trigger = {
			NOT = { religion = event_target:mender_religion }
			NOT = { religion_group = christian }
		}
	}
}

### UNITING CHRISTIANITY

# Ecumenical Council Called
narrative_event = {
	id = Plus.2250
	title = EVTNAME_Plus_2230
	desc = EVTDESC_Plus_2250
	picture = GFX_evt_great_schism
	border = GFX_event_narrative_frame_religion
	
	is_triggered_only = yes
	
	immediate = {
		save_event_target_as = council_holder
		capital_holding = { location = { save_event_target_as = council_location } }
		any_title = {
			limit = {
				OR = {
					title = k_papal_state
					title = d_cathar
					title = d_fraticelli
				}
				has_holder = yes
				holder_scope = { is_heretic = no }
			}
			holder_scope = {
				save_event_target_as = target_religion
			}
		}
		if = {
			limit = { controls_religion = no }
			religion_head = { save_event_target_as = mender_religion }
		}
		if = {
			limit = { controls_religion = yes }
			save_event_target_as = mender_religion
		}
	}
	
	option = {
		name = EVTOPTA_Plus_2230
		set_global_flag = uniting_christianity
		add_character_modifier = {
			modifier = do_not_disturb
			hidden = yes
			duration = 30
		}
		hidden_tooltip = {
			any_demesne_title = {
				limit = {
					tier = COUNT
					location = { unite_christianity_religion_trigger = yes }
				}
				location = { set_province_flag = change_religion }
			}
			any_courtier = {
				limit = {
					unite_christianity_religion_trigger = yes
					NOT = { trait = zealous }
					is_ruler = no
					controls_religion = no
					mercenary = no
					holy_order = no
					can_change_religion = yes
				}
				religion = ROOT
			}
			any_vassal = {
				limit = {
					unite_christianity_religion_trigger = yes
					NOT = { trait = zealous }
					is_playable = no
					controls_religion = no
					mercenary = no
					holy_order = no
					can_change_religion = yes
				}
				religion = ROOT
				any_courtier = {
					limit = {
						unite_christianity_religion_trigger = yes
						NOT = { trait = zealous }
						is_ruler = no
						controls_religion = no
						mercenary = no
						holy_order = no
						can_change_religion = yes
					}
					religion = ROOT
				}
			}
			any_vassal = {
				limit = { is_playable = yes }
				narrative_event = { id = Plus.2251 days = 1 random = 4 } #choose whether to convert
			}
			any_independent_ruler = {
				limit = {
					is_playable = yes
					NOT = { character = ROOT }
				}
				narrative_event = { id = Plus.2251 days = 1 random = 4 } #choose whether to convert
			}
			event_target:council_location = {
				province_event = { id = Plus.2252 days = 30 } #council is over
			}
		}
	}
}

# Rulers informed about the Ecumenical Council - Convert or Not?
narrative_event = {
	id = Plus.2251
	title = EVTNAME_Plus_2230
	desc = EVTDESC_Plus_2250
	picture = GFX_evt_great_schism
	border = GFX_event_narrative_frame_religion
	
	is_triggered_only = yes
	hide_from = yes
	
	immediate = {
		any_vassal = {
			limit = { is_playable = yes }
			narrative_event = { id = Plus.2251 days = 1 random = 4 } #choose whether to convert
		}
	}
	
	option = {
		name = EVTOPTA_Plus_2231 # Convert
		trigger = {
			controls_religion = no
			mercenary = no
			holy_order = no
			can_change_religion = yes
			unite_christianity_religion_trigger = yes
		}
		ai_chance = {
			factor = 75
			modifier = {
				factor = 0
				OR = {
					trait = zealous
					has_character_modifier = voice_of_jesus
					has_character_modifier = voice_of_satan
				}
			}
			modifier = {
				factor = 1.5
				trait = humble
			}
			modifier = {
				factor = 1.5
				trait = craven
			}
			modifier = {
				factor = 1.5
				trait = content
			}
			modifier = {
				factor = 1.5
				independent = no
				liege = { religion = event_target:mender_religion }
			}
		}
		religion = event_target:mender_religion
		any_demesne_title = {
			limit = {
				tier = COUNT
				location = { unite_christianity_religion_trigger = yes }
			}
			location = { set_province_flag = change_religion }
		}
		any_courtier = {
			limit = {
				unite_christianity_religion_trigger = yes
				NOT = { trait = zealous }
				is_ruler = no
				controls_religion = no
				mercenary = no
				holy_order = no
				can_change_religion = yes
			}
			religion = event_target:mender_religion
		}
		any_vassal = {
			limit = {
				unite_christianity_religion_trigger = yes
				NOT = { trait = zealous }
				is_playable = no
				controls_religion = no
				mercenary = no
				holy_order = no
				can_change_religion = yes
			}
			religion = event_target:mender_religion
			any_courtier = {
				limit = {
					unite_christianity_religion_trigger = yes
					NOT = { trait = zealous }
					is_ruler = no
					controls_religion = no
					mercenary = no
					holy_order = no
					can_change_religion = yes
				}
				religion = event_target:mender_religion
			}
		}
	}
	option = {
		name = EVTOPTB_Plus_2231 # Don't Convert
		trigger = {
			controls_religion = no
			mercenary = no
			holy_order = no
			can_change_religion = yes
			unite_christianity_religion_trigger = yes
		}
		ai_chance = {
			factor = 25
			modifier = {
				factor = 0
				NOR = {
					trait = zealous
					trait = lunatic
					trait = proud
					trait = detached_priest
					trait = martial_cleric
					trait = scholarly_theologian
					trait = mastermind_theologian
					has_character_modifier = voice_of_jesus
					has_character_modifier = voice_of_satan
					capital_holding = { holding_type = temple }
					liege = { NOT = { religion = event_target:mender_religion } }
					real_tier = EMPEROR
				}
			}
			modifier = {
				factor = 0
				OR = {
					trait = cynical
					has_character_modifier = defied_church
				}
			}
			modifier = {
				factor = 3
				trait = lunatic
			}
			modifier = {
				factor = 1.5
				trait = proud
			}
			modifier = {
				factor = 1.5
				trait = brave
			}
			modifier = {
				factor = 1.5
				trait = detached_priest
			}
			modifier = {
				factor = 2
				trait = martial_cleric
			}
			modifier = {
				factor = 2.5
				trait = scholarly_theologian
			}
			modifier = {
				factor = 3
				trait = mastermind_theologian
			}
			modifier = {
				factor = 3
				independent = no
				liege = { NOT = { religion = event_target:mender_religion } }
			}
			modifier = {
				factor = 2
				independent = yes
				real_tier = KING
			}
			modifier = {
				factor = 3
				independent = yes
				real_tier = EMPEROR
			}
		}
		if = {
			limit = { NOT = { trait = zealous } }
			random = {
				chance = 25
				add_trait = zealous
			}
		}
	}
	option = {
		name = EVTOPTC_Plus_2231 # This is of great concern...
		trigger = {
			NAND = {
				controls_religion = no
				mercenary = no
				holy_order = no
				can_change_religion = yes
				unite_christianity_religion_trigger = yes
			}
			NOT = { religion = event_target:mender_religion }
			religion_group = christian
		}
	}
	option = {
		name = {
			text = EVTOPTD_Plus_2231 # A wonderful day!
			trigger = { religion = event_target:mender_religion }
		}
		name = {
			text = EVTOPTE_Plus_2231 # Nothing to do with me
			trigger = {
				NAND = {
					controls_religion = no
					mercenary = no
					holy_order = no
					can_change_religion = yes
					unite_christianity_religion_trigger = yes
				}
				NOT = { religion = event_target:mender_religion }
				NOT = { religion_group = christian }
			}
		}
		any_demesne_title = {
			limit = {
				tier = COUNT
				location = { unite_christianity_religion_trigger = yes }
			}
			location = { set_province_flag = change_religion }
		}
		any_courtier = {
			limit = {
				unite_christianity_religion_trigger = yes
				NOT = { trait = zealous }
				is_ruler = no
				controls_religion = no
				mercenary = no
				holy_order = no
				can_change_religion = yes
			}
			religion = event_target:mender_religion
		}
		any_vassal = {
			limit = {
				unite_christianity_religion_trigger = yes
				NOT = { trait = zealous }
				is_playable = no
				controls_religion = no
				mercenary = no
				holy_order = no
				can_change_religion = yes
			}
			religion = event_target:mender_religion
			any_courtier = {
				limit = {
					unite_christianity_religion_trigger = yes
					NOT = { trait = zealous }
					is_ruler = no
					controls_religion = no
					mercenary = no
					holy_order = no
					can_change_religion = yes
				}
				religion = event_target:mender_religion
			}
		}
	}
}

# Province bounce event
province_event = {
	id = Plus.2252
	
	is_triggered_only = yes
	hide_window = yes
	
	immediate = {
		owner = {
			narrative_event = { id = Plus.2253 }
		}
	}
}

# Ecumenical Council Over
narrative_event = {
	id = Plus.2253
	title = EVTNAME_Plus_2230
	desc = EVTDESC_Plus_2253
	picture = GFX_evt_great_schism
	border = GFX_event_narrative_frame_religion
	
	is_triggered_only = yes
	major = yes
	
	immediate = {
		clr_global_flag = uniting_christianity
		set_global_flag = christianity_united	
		event_target:mender_religion = {
			event_target:target_religion = {
				set_parent_religion = { religion = THIS parent = PREV }
			}
		}
		top_liege = {
			any_realm_province = {
				limit = { has_province_flag = change_religion }
				clr_province_flag = change_religion
				religion = event_target:mender_religion
			}
		}
		any_independent_ruler = {
			any_realm_province = {
				limit = { has_province_flag = change_religion }
				clr_province_flag = change_religion
				religion = event_target:mender_religion
			}
		}
	}
	
	option = {
		name = EVTOPTA_Plus_2232
		trigger = { religion = event_target:mender_religion }
		if = {
			limit = { character = event_target:council_holder }
			prestige = 1000
			set_character_flag = schism_mender
			give_nickname = nick_the_saint
		}
	}
	option = {
		name = EVTOPTB_Plus_2232
		trigger = {
			NOT = { religion = event_target:mender_religion }
			religion_group = christian
		}
	}
	option = {
		name = EVTOPTC_Plus_2232
		trigger = {
			NOT = { religion = event_target:mender_religion }
			NOT = { religion_group = christian }
		}
	}
}

