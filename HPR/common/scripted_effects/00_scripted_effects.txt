#	Example:
# 
#	example_effect = {
#		treasury = 100
#		prestige = 50
#	}
#
#
#	In a script file:
#
#	effect = {
#		example_effect = yes
#	}
#
# Naming convention:  xxxx_effect
#

heresy_character_effect = {
	# Prefer a neighboring heresy
	location = {
		random_neighbor_province = {
			limit = {
				is_land = yes
				is_heresy_of = ROOT
			}
			ROOT = { religion = PREV }
			break = yes
		}
	}
	# Prefer a neighboring member of the same religion group
	location = {
		random_neighbor_province = {
			limit = {
				is_land = yes
				is_heretic = no
				religion_group = ROOT
				NOT = { religion = ROOT }
				NOT = { religion_group = pagan_group }
			}
			ROOT = { religion = PREV }
			break = yes
		}
	}
	# Prefer an existing heresy in the realm
	top_liege = {
		random_realm_province = {
			limit = { is_heresy_of = ROOT }
			ROOT = { religion = PREV }
			break = yes
		}
	}
	# Or one not far away
	random_independent_ruler = {
		limit = {
			any_realm_province = {
				is_heresy_of = ROOT
				ROOT = {
					location = {
						NOT = { distance = { where = PREVPREV value = 300 } }
					}
				}
			}
		}
		random_realm_province = {
			limit = {
				is_heresy_of = ROOT
				ROOT = {
					location = {
						NOT = { distance = { where = PREVPREV value = 300 } }
					}
				}
			}
			ROOT = { religion = PREV }
			break = yes
		}
	}
	# ...otherwise, just pick a heresy
	if = {
		limit = { religion_group = christian }
		if = {
			limit = { religion = chalcedonian }
			random_list = {
				75 = {
					modifier = {
						factor = 0
						location = {
							NOR = {
								region = world_europe_west
								region = world_europe_north
								region = world_europe_south_italy
							}
						}
					}
					modifier = {
						factor = 0.25
						NOR = {
							location = { region = custom_aquitaine }
							location = { region = custom_burgundy }
							culture = occitan
						}
					}
					modifier = {
						factor = 1.5
						culture = occitan
					}
					religion = cathar
				}
				75 = {
					modifier = {
						factor = 0
						location = {
							NOR = {
								region = world_europe_west
								region = world_europe_north
								region = world_europe_south_italy
							}
						}
					}
					modifier = {
						factor = 0.25
						NOR = {
							location = { region = custom_france }
							culture = frankish
						}
					}
					modifier = {
						factor = 1.5
						culture = frankish
					}
					religion = waldensian
				}
				75 = {
					modifier = {
						factor = 0
						location = {
							NOR = {
								region = world_europe_west
								region = world_europe_north
								region = world_europe_south_italy
							}
						}
					}
					modifier = {
						factor = 0.25
						NOT = { location = { region = world_europe_west_brittania } }
					}
					religion = lollard
				}
				75 = {
					modifier = {
						factor = 0
						location = {
							NOR = {
								region = world_europe_west
								region = world_europe_north
								region = world_europe_south_italy
							}
						}
					}
					modifier = {
						factor = 0.25
						NOT = { location = { region = world_europe_west_iberia } }
					}
					modifier = {
						factor = 1.5
						culture_group = iberian
					}
					religion = adoptionist
				}
				75 = {
					modifier = {
						factor = 0
						location = {
							OR = {
								region = world_europe_west
								region = world_europe_north
								region = world_europe_south_italy
							}
						}
					}
					modifier = {
						factor = 0.25
						NOR = {
							location = { region = custom_bulgaria }
							location = { region = custom_croatia }
							location = { region = custom_serbia }
							culture_group = south_slavic
						}
					}
					modifier = {
						factor = 1.5
						location = { region = custom_bulgaria }
					}
					religion = bogomilist
				}
				75 = {
					modifier = {
						factor = 0
						location = {
							OR = {
								region = world_europe_west
								region = world_europe_north
								region = world_europe_south_italy
							}
						}
					}
					modifier = {
						factor = 0.25
						NOR = {
							location = { region = world_middle_east }
							location = { region = custom_azerbaijan }
							location = { region = custom_persia }
							culture_group = arabic
						}
					}
					religion = monothelite
				}
				75 = {
					modifier = {
						factor = 0
						location = {
							OR = {
								region = world_europe_west
								region = world_europe_north
								region = world_europe_south_italy
							}
						}
					}
					modifier = {
						factor = 0.25
						NOT = { location = { region = custom_byzantium } }
					}
					modifier = {
						factor = 1.5
						culture = greek
					}
					religion = iconoclast
				}
				25 = {
					modifier = {
						factor = 0
						NOR = {
							location = { region = custom_armenia }
							location = { region = custom_georgia }
							culture = armenian
						}
					}
					religion = paulician
				}
				25 = {
					modifier = {
						factor = 0.1
						NOR = {
							location = { region = world_middle_east }
							location = { region = world_africa }
						}
					}
					modifier = {
						factor = 1.5
						location = { region = world_africa_east }
					}
					religion = miaphysite
				}
				25 = {
					modifier = {
						factor = 0
						NOR = {
							location = { region = custom_armenia }
							location = { region = custom_georgia }
						}
					}
					modifier = {
						factor = 1.5
						location = { region = custom_armenia }
					}
					religion = apostolic
				}
				25 = {
					modifier = {
						factor = 0.1
						NOR = {
							location = { region = world_india }
							location = { region = world_steppe }
							location = { region = world_middle_east }
							location = { region = world_asia_minor }
							location = { region = world_persia }
						}
					}
					modifier = {
						factor = 0.5
						NOR = {
							location = { region = world_india }
							location = { region = world_steppe }
							location = { region = world_persia }
						}
					}
					modifier = {
						factor = 0.5
						year = 1200
					}
					religion = nestorian
				}
				25 = {
					modifier = {
						factor = 0
						NOR = {
							location = { region = world_persia }
							location = { region = world_steppe_east }
							location = { region = world_steppe_tarim }
							location = { region = world_middle_east_arabia }
							#trait = sympathy_zoroastrianism
						}
					}
#					modifier = {
#						factor = 2
#						trait = sympathy_zoroastrianism
#					}
					modifier = {
						factor = 0.5
						year = 1100
					}
					modifier = {
						factor = 0.5
						year = 1200
					}
					religion = manichean
				}
				25 = {
					modifier = {
						factor = 0.25
						NOR = {
							location = { region = world_middle_east_jerusalem }
							culture_group = israelite
							#trait = sympathy_judaism
						}
					}
#					modifier = {
#						factor = 2
#						trait = sympathy_judaism
#					}
					religion = jewish
				}
				10 = {
					become_heretic = yes
				}
			}
			break = yes
		}
		if = {
			limit = { religion = catholic }
			random_list = {
				75 = {
					modifier = {
						factor = 0
						NOR = {
							location = { region = world_europe_south_italy }
							culture = italian
						}
					}
					religion = fraticelli
				}
				75 = {
					modifier = {
						factor = 0
						NOR = {
							location = { region = custom_aquitaine }
							location = { region = custom_burgundy }
							culture = occitan
						}
					}
					religion = cathar
				}
				75 = {
					modifier = {
						factor = 0
						NOT = { location = { region = world_europe_west_brittania } }
					}		
					modifier = {
						factor = 0.5
						NOR = {
							location = { region = custom_england }
							culture = english
						}
					}
					religion = lollard
				}
				75 = {
					modifier = {
						factor = 0
						NOR = {
							location = { region = custom_france }
							culture = frankish
						}
					}
					religion = waldensian
				}
				50 = {
					modifier = {
						factor = 0
						NOT = { location = { region = world_europe_west_iberia } }
					}
					religion = adoptionist
				}
				75 = {
					modifier = {
						factor = 0
						NOR = {
							location = { region = world_europe_south_east }
							location = { region = world_europe_east }
							location = { region = world_asia_minor }
							location = { region = world_middle_east_jerusalem }
						}
					}
					modifier = {
						factor = 0.35
						NOR = {
							location = { region = custom_byzantium }
							culture_group = byzantine
							culture_group = east_slavic
							culture_group = south_slavic
						}
					}
					religion = orthodox
				}
				25 = {
					modifier = {
						factor = 0
						NOR = {
							location = { region = world_middle_east }
							location = { region = world_africa }
						}
					}
					modifier = {
						factor = 1.5
						location = { region = world_africa_east }
					}
					religion = miaphysite
				}
				25 = {
					modifier = {
						factor = 0
						NOR = {
							location = { region = custom_armenia }
							location = { region = custom_georgia }
						}
					}
					modifier = {
						factor = 1.5
						location = { region = custom_armenia }
					}
					religion = apostolic
				}
				25 = {
					modifier = {
						factor = 0
						NOR = {
							location = { region = world_india }
							location = { region = world_steppe }
							location = { region = world_middle_east }
							location = { region = world_asia_minor }
							location = { region = world_persia }
						}
					}
					modifier = {
						factor = 0.5
						NOR = {
							location = { region = world_india }
							location = { region = world_steppe }
							location = { region = world_persia }
						}
					}
					modifier = {
						factor = 0.5
						year = 1200
					}
					religion = nestorian
				}
				25 = {
					modifier = {
						factor = 0
						NOR = {
							location = { region = world_persia }
							location = { region = world_steppe_east }
							location = { region = world_steppe_tarim }
							location = { region = world_middle_east_arabia }
							#trait = sympathy_zoroastrianism
						}
					}
#					modifier = {
#						factor = 2
#						trait = sympathy_zoroastrianism
#					}
					modifier = {
						factor = 0.5
						year = 1100
					}
					modifier = {
						factor = 0.5
						year = 1200
					}
					religion = manichean
				}
				25 = {
					modifier = {
						factor = 0.1
						NOR = {
							location = { region = world_middle_east_jerusalem }
							culture_group = israelite
							#trait = sympathy_judaism
						}
					}
#					modifier = {
#						factor = 2
#						trait = sympathy_judaism
#					}
					religion = jewish
				}
				25 = {
					become_heretic = yes
				}
			}
			break = yes			
		}
		if = {
			limit = { religion = orthodox }
			random_list = {
				50 = {
					modifier = {
						factor = 0
						NOR = {
							location = { region = custom_bulgaria }
							location = { region = custom_croatia }
							location = { region = custom_serbia }
							culture_group = south_slavic
						}
					}
					modifier = {
						factor = 1.5
						location = { region = custom_bulgaria }
					}
					religion = bogomilist
				}
				50 = {
					modifier = {
						factor = 0
						NOT = { location = { region = custom_byzantium } }
					}
					religion = iconoclast
				}
				25 = {
					modifier = {
						factor = 0
						NOR = {
							location = { region = custom_armenia }
							location = { region = custom_georgia }
							culture = armenian
						}
					}
					religion = paulician
				}
				50 = {
					modifier = {
						factor = 0
						NOR = {
							location = { region = world_middle_east }
							location = { region = custom_azerbaijan }
							location = { region = custom_persia }
							culture_group = arabic
						}
					}
					religion = monothelite
				}
				25 = {
					modifier = {
						factor = 0
						NOR = {
							location = { region = world_india }
							location = { region = world_steppe }
							location = { region = world_middle_east }
							location = { region = world_asia_minor }
							location = { region = world_persia }
						}
					}
					modifier = {
						factor = 0.5
						NOR = {
							location = { region = world_india }
							location = { region = world_steppe }
							location = { region = world_persia }
						}
					}
					modifier = {
						factor = 0.5
						year = 1200
					}
					religion = nestorian
				}
				25 = {
					modifier = {
						factor = 0
						NOR = {
							location = { region = custom_armenia }
							location = { region = custom_georgia }
						}
					}
					modifier = {
						factor = 1.5
						location = { region = custom_armenia }
					}
					religion = apostolic
				}
				25 = {
					modifier = {
						factor = 0
						NOR = {
							location = { region = world_middle_east }
							location = { region = world_africa }
						}
					}
					modifier = {
						factor = 1.5
						location = { region = world_africa_east }
					}
					religion = miaphysite
				}
				25 = {
					modifier = {
						factor = 0
						NOR = {
							location = { region = world_persia }
							location = { region = world_steppe_east }
							location = { region = world_steppe_tarim }
							location = { region = world_middle_east_arabia }
							#trait = sympathy_zoroastrianism
						}
					}
#					modifier = {
#						factor = 2
#						trait = sympathy_zoroastrianism
#					}
					modifier = {
						factor = 0.5
						year = 1100
					}
					modifier = {
						factor = 0.5
						year = 1200
					}
					religion = manichean
				}
				25 = {
					modifier = {
						factor = 0
						NOR = {
							location = { region = world_europe_west }
							location = { region = world_europe_north }
							location = { region = world_europe_south_italy }
							location = { region = custom_croatia }
							location = { region = custom_poland }
							location = { region = custom_carpathia }
						}
					}
					religion = catholic
				}
				25 = {
					modifier = {
						factor = 0.1
						NOR = {
							location = { region = world_middle_east_jerusalem }
							culture_group = israelite
							#trait = sympathy_judaism
						}
					}
#					modifier = {
#						factor = 2
#						trait = sympathy_judaism
#					}
					religion = jewish
				}
				25 = {
					become_heretic = yes
				}
			}
			break = yes
		}
		if = {
			limit = { religion = nestorian }
			random_list = {
				25 = {
					modifier = {
						factor = 0
						NOR = {
							location = { region = world_india }
							location = { region = world_middle_east }
							location = { region = world_steppe }
							location = { region = world_persia }
							#trait = sympathy_zoroastrianism
						}
					}
#					modifier = {
#						factor = 2
#						trait = sympathy_zoroastrianism
#					}
					religion = manichean
				}
				25 = {
					modifier = {
						factor = 0
						NOR = {
							location = { region = world_africa }
							location = { region = world_middle_east }
						}
					}
					religion = miaphysite
				}
				25 = {
					modifier = {
						factor = 0
						NOT = {
							location = { region = world_asia_minor }
						}
					}
					religion = apostolic
				}
				25 = {
					modifier = {
						factor = 0
						NOT = { location = { region = world_europe } }
					}
					if = {
						limit = { has_global_flag = schism_happened }
						religion = orthodox
					}
					if = {
						limit = { NOT = { has_global_flag = schism_happened } }
						religion = chalcedonian
					}
				}
				50 = { become_heretic = yes }
			}
			break = yes
		}
		if = {
			limit = { religion = miaphysite }
			random_list = {
				25 = {
					modifier = {
						factor = 0
						NOT = {
							location = { region = world_asia_minor }
						}
					}
					religion = apostolic
				}
				25 = {
					modifier = {
						factor = 0
						NOR = {
							location = { region = world_india }
							location = { region = world_middle_east }
							location = { region = world_steppe }
							location = { region = world_persia }
							#trait = sympathy_zoroastrianism
						}
					}
#					modifier = {
#						factor = 2
#						trait = sympathy_zoroastrianism
#					}
					modifier = {
						factor = 0.5
						year = 1100
					}
					modifier = {
						factor = 0.5
						year = 1200
					}
					religion = manichean
				}
				25 = {
					modifier = {
						factor = 0
						NOR = {
							location = { region = world_india }
							location = { region = world_africa }
							location = { region = world_steppe }
							location = { region = world_middle_east }
							location = { region = world_persia }
						}
					}
					modifier = {
						factor = 0.5
						year = 1200
					}
					religion = nestorian
				}
				25 = {
					modifier = {
						factor = 0
						NOR = {
							location = { region = world_europe }
							location = { region = world_middle_east }
						}
					}
					if = {
						limit = { has_global_flag = schism_happened }
						religion = orthodox
					}
					if = {
						limit = { NOT = { has_global_flag = schism_happened } }
						religion = chalcedonian
					}
				}
				25 = { religion = monophysite }
			}
			break = yes
		}
		become_heretic = yes
		break = yes
	}
	if = {
		limit = { religion_group = muslim }
		random_list = {
			40 = {
				modifier = {
					factor = 0
					religion = sunni
				}
				modifier = {
					factor = 0.25
					religion = shiite
				}
				religion = sunni
			}
			20 = {
				modifier = {
					factor = 0
					religion = yazidi
				}
				modifier = {
					factor = 0
					NOR = {
						culture = kurdish
						location = { region = custom_armenia }
						location = { region = custom_azerbaijan }
						location = { region = custom_mesopotamia }
						#trait = sympathy_zoroastrianism
					}
				}
				modifier = {
					factor = 2
					culture = kurdish
				}
				modifier = {
					factor = 0.25
					NOT = { culture = kurdish }
					location = { region = custom_mesopotamia }
				}
				religion = yazidi
			}
			20 = {
				modifier = {
					factor = 0
					religion = ibadi
				}
				modifier = {
					factor = 0.5
					NOR = {
						location = { region = world_africa }
						location = { region = custom_arabia }
						culture = bedouin_arabic
					}
				}
				modifier = {
					factor = 2
					culture = bedouin_arabic
				}
				religion = ibadi
			}
			20 = {
				modifier = {
					factor = 0
					religion = kharijite
				}
				modifier = {
					factor = 0
					NOR = {
						religion = ibadi
						location = { region = world_middle_east_arabia }
					}
				}
				religion = kharijite
			}
			40 = {
				modifier = {
					factor = 0
					religion = shiite
				}
				modifier = {
					factor = 1.5
					religion = sunni
				}
				religion = shiite
			}
			20 = {
				modifier = {
					factor = 0
					religion = bektashi
				}
				modifier = {
					factor = 0
					NOT = { location = { region = world_europe_south_east } }
				}
				religion = bektashi
			}
			20 = {
				modifier = {
					factor = 0
					religion = druze
				}
				modifier = {
					factor = 0
					NOR = {
						location = { region = world_middle_east_jerusalem }
						culture = levantine_arabic
					}
				}
				modifier = {
					factor = 0.25
					culture = levantine_arabic
					NOT = { location = { region = world_middle_east_jerusalem } }
				}
				religion = druze
			}
			20 = {
				modifier = {
					factor = 0
					religion = hurufi
				}
				religion = hurufi
			}
			10 = {
				modifier = {
					factor = 2
					location = { region = custom_persia }
				}
				modifier = {
					factor = 0
					NOR = {
						location = { region = world_persia }
						location = { region = custom_mesopotamia }
						location = { region = custom_khwarizm }
						culture = persian
						#trait = sympathy_zoroastrianism
					}
				}
#				modifier = {
#					factor = 2
#					trait = sympathy_zoroastrianism
#				}
				modifier = {
					factor = 0.5
					year = 1200
				}
				religion = zoroastrian
			}
			10 = {
				modifier = {
					factor = 2
					location = { region = world_steppe }
				}
				modifier = {
					factor = 0
					NOR = {
						location = { region = world_india }
						location = { region = world_middle_east }
						location = { region = custom_azerbaijan }
						location = { region = world_persia }
						location = { region = world_steppe }
					}
				}
				modifier = {
					factor = 0.5
					year = 1100
				}
				modifier = {
					factor = 0.5
					year = 1200
				}
				religion = manichean
			}
			10 = {
				modifier = {
					factor = 0
					NOT = {
						location = { region = custom_jerusalem }
						#trait = sympathy_judaism
					}
				}
				religion = jewish
			}
			10 = {
				modifier = {
					factor = 0
					NOT = {
						location = { region = custom_armenia }
					}
				}
				modifier = {
					factor = 3
					culture = armenian
				}
#				modifier = {
#					factor = 1.5
#					trait = sympathy_christendom
#				}
				religion = apostolic
			}
			10 = {
				modifier = {
					factor = 0
					NOR = {
						location = { region = world_africa_north }
						location = { region = world_africa_east }
						culture = egyptian_arabic
					}
				}
				modifier = {
					factor = 2.5
					culture = egyptian_arabic
				}
				modifier = {
					factor = 0.5
					NOR = {
						location = { region = custom_egypt }
						location = { region = custom_abyssinia }
						location = { region = custom_nubia }
					}
				}		
#				modifier = {
#					factor = 1.5
#					trait = sympathy_christendom
#				}
				religion = miaphysite
			}
			10 = {
				modifier = {
					factor = 0
					NOR = {
						location = { region = world_europe_south_east }
						location = { region = world_europe_east }
					}
				}
#				modifier = {
#					factor = 1.5
#					trait = sympathy_christendom
#				}
				modifier = {
					factor = 2.5
					OR = {
						culture_group = byzantine
						culture_group = east_slavic
						culture_group = south_slavic
					}
				}
				modifier = {
					factor = 0.5
					NOR = {
						location = { region = custom_byzantium }
						culture_group = byzantine
						culture_group = east_slavic
						culture_group = south_slavic
					}
				}
				if = {
					limit = { has_global_flag = schism_happened }
					religion = orthodox
				}
				if = {
					limit = { NOT = { has_global_flag = schism_happened } }
					religion = chalcedonian
				}
			}
			10 = {
				modifier = {
					factor = 0
					NOR = {
						location = { region = world_europe_west }
						location = { region = world_europe_north }
						location = { region = world_europe_south_italy }
					}
				}
#				modifier = {
#					factor = 1.5
#					trait = sympathy_christendom
#				}
				if = {
					limit = { has_global_flag = schism_happened }
					religion = catholic
				}
				if = {
					limit = { NOT = { has_global_flag = schism_happened } }
					religion = chalcedonian
				}
			}
			10 = {
				become_heretic = yes
			}
		}
		break = yes
	}
	if = {
		limit = { religion_group = jewish_group }
		random_list = {
			75 = {
				modifier = {
					factor = 0
					NOT = { culture_group = altaic }
				}
				modifier = {
					factor = 0
					religion = karaite
				}
				religion = karaite
			}
			25 = {
				modifier = {
					factor = 0
					NOR = {
						location = { region = world_europe_south_east }
						location = { region = world_europe_east }
					}
				}
#				modifier = {
#					factor = 1.5
#					trait = sympathy_christendom
#				}
				modifier = {
					factor = 0.5
					NOR = {
						location = { region = custom_byzantium }
						culture_group = byzantine
						culture_group = east_slavic
						culture_group = south_slavic
					}
				}
				if = {
					limit = { has_global_flag = schism_happened }
					religion = orthodox
				}
				if = {
					limit = { NOT = { has_global_flag = schism_happened } }
					religion = chalcedonian
				}
			}
			25 = {
				modifier = {
					factor = 0
					NOR = {
						location = { region = world_europe_west }
						location = { region = world_europe_north }
						location = { region = world_europe_south_italy }
					}
				}
#				modifier = {
#					factor = 1.5
#					trait = sympathy_christendom
#				}
				if = {
					limit = { has_global_flag = schism_happened }
					religion = catholic
				}
				if = {
					limit = { NOT = { has_global_flag = schism_happened } }
					religion = chalcedonian
				}
			}
			25 = {
				modifier = {
					factor = 0
					NOT = {
						location = { region = world_asia_minor }
					}
				}
#				modifier = {
#					factor = 1.5
#					trait = sympathy_christendom
#				}
				religion = apostolic
			}
			25 = {
				modifier = {
					factor = 0
					NOT = {
						location = { region = world_africa }
					}
				}
#				modifier = {
#					factor = 1.5
#					trait = sympathy_christendom
#				}
				religion = miaphysite
			}
			50 = {
				modifier = {
					factor = 0.25
					culture_group = altaic
				}
				become_heretic = yes
			}
		}
		break = yes
	}
	if = {
		limit = { religion_group = zoroastrian_group }
		random_list = {
			50 = {
				modifier = {
					factor = 0
					religion = zoroastrian
				}
				modifier = {
					factor = 0.5
					religion = manichean
				}
				religion = zoroastrian
			}
			50 = {
				modifier = {
					factor = 0
					religion = manichean
				}
				modifier = {
					factor = 0.5
					religion = zoroastrian
				}
				religion = manichean
			}
			50 = {
				modifier = {
					factor = 0
					religion = yazidi
				}
				modifier = {
					factor = 0
					NOR = {
						culture = kurdish
						location = { region = custom_armenia }
						location = { region = custom_azerbaijan }
						location = { region = custom_mesopotamia }
					}
				}
#				modifier = {
#					factor = 2
#					trait = sympathy_islam
#				}
				modifier = {
					factor = 2
					culture = kurdish
				}
				religion = yazidi
			}
			50 = {
#				modifier = {
#					factor = 2
#					trait = sympathy_islam
#				}
				religion = shiite
			}
			50 = {
				modifier = {
					factor = 0
					NOT = { religion = manichean }
				}
#				modifier = {
#					factor = 2
#					trait = sympathy_christendom
#				}
				religion = nestorian
			}
			20 = {
				modifier = {
					factor = 0
					NOT = {
						location = { region = world_asia_minor }
					}
				}
#				modifier = {
#					factor = 2
#					trait = sympathy_christendom
#				}
				religion = apostolic
			}
			20 = {
				modifier = {
					factor = 0
					NOT = {
						location = { region = world_africa }
					}
				}
#				modifier = {
#					factor = 2
#					trait = sympathy_christendom
#				}
				religion = miaphysite
			}
			50 = {
				become_heretic = yes
			}
		}
		break = yes
	}
	become_heretic = yes
	break = yes
}

heresy_province_effect = {
	# Prefer a neighboring heresy
	random_neighbor_province = {
		limit = {
			is_land = yes
			is_heresy_of = ROOT
		}
		ROOT = { religion = PREV }
		break = yes
	}
	# Prefer a neighboring member of the same religion group
	random_neighbor_province = {
		limit = {
			is_land = yes
			is_heretic = no
			religion_group = ROOT
			NOT = { religion = ROOT }
			NOT = { religion_group = pagan_group }
		}
		ROOT = { religion = PREV }
		break = yes
	}
	# Prefer an existing heresy in the realm
	owner = {
		top_liege = {
			random_realm_province = {
				limit = { is_heresy_of = ROOT }
				ROOT = { religion = PREV }
				break = yes
			}
		}
	}
	# Or one not far away
	random_independent_ruler = {
		limit = {
			any_realm_province = {
				is_heresy_of = ROOT
				NOT = { distance = { where = ROOT value = 300 } }
			}
		}
		random_realm_province = {
			limit = {
				is_heresy_of = ROOT
				NOT = { distance = { where = ROOT value = 300 } }
			}
			ROOT = { religion = PREV }
			break = yes
		}
	}
	# ...otherwise, just pick a heresy
	if = {
		limit = { religion_group = christian }
		if = {
			limit = { religion = chalcedonian }
			random_list = {
				75 = {
					modifier = {
						factor = 0
						NOR = {
							region = world_europe_west
							region = world_europe_north
							region = world_europe_south_italy
						}
					}
					modifier = {
						factor = 0.25
						NOR = {
							region = custom_aquitaine
							region = custom_burgundy
							culture = occitan
						}
					}
					modifier = {
						factor = 1.5
						culture = occitan
					}
					religion = cathar
				}
				75 = {
					modifier = {
						factor = 0
						NOR = {
							region = world_europe_west
							region = world_europe_north
							region = world_europe_south_italy
						}
					}
					modifier = {
						factor = 0.25
						NOR = {
							region = custom_france
							culture = frankish
						}
					}
					modifier = {
						factor = 1.5
						culture = frankish
					}
					religion = waldensian
				}
				75 = {
					modifier = {
						factor = 0
						NOR = {
							region = world_europe_west
							region = world_europe_north
							region = world_europe_south_italy
						}
					}
					modifier = {
						factor = 0.25
						NOT = { region = world_europe_west_brittania }
					}
					religion = lollard
				}
				75 = {
					modifier = {
						factor = 0
						NOR = {
							region = world_europe_west
							region = world_europe_north
							region = world_europe_south_italy
						}
					}
					modifier = {
						factor = 0.25
						NOT = { region = world_europe_west_iberia }
					}
					modifier = {
						factor = 1.5
						culture_group = iberian
					}
					religion = adoptionist
				}
				75 = {
					modifier = {
						factor = 0
						OR = {
							region = world_europe_west
							region = world_europe_north
							region = world_europe_south_italy
						}
					}
					modifier = {
						factor = 0.25
						NOR = {
							region = custom_bulgaria
							region = custom_croatia
							region = custom_serbia
							culture_group = south_slavic
						}
					}
					modifier = {
						factor = 1.5
						region = custom_bulgaria
					}
					religion = bogomilist
				}
				75 = {
					modifier = {
						factor = 0
						OR = {
							region = world_europe_west
							region = world_europe_north
							region = world_europe_south_italy
						}
					}
					modifier = {
						factor = 0.25
						NOR = {
							region = world_middle_east
							region = custom_azerbaijan
							region = custom_persia
							culture_group = arabic
						}
					}
					religion = monothelite
				}
				75 = {
					modifier = {
						factor = 0
						OR = {
							region = world_europe_west
							region = world_europe_north
							region = world_europe_south_italy
						}
					}
					modifier = {
						factor = 0.25
						NOT = { region = custom_byzantium }
					}
					modifier = {
						factor = 1.5
						culture = greek
					}
					religion = iconoclast
				}
				25 = {
					modifier = {
						factor = 0
						NOR = {
							region = custom_armenia
							region = custom_georgia
							culture = armenian
						}
					}
					religion = paulician
				}
				25 = {
					modifier = {
						factor = 0.1
						NOR = {
							region = world_middle_east
							region = world_africa
						}
					}
					modifier = {
						factor = 1.5
						region = world_africa_east
					}
					religion = miaphysite
				}
				25 = {
					modifier = {
						factor = 0
						NOR = {
							region = custom_armenia
							region = custom_georgia
						}
					}
					modifier = {
						factor = 1.5
						region = custom_armenia
					}
					religion = apostolic
				}
				25 = {
					modifier = {
						factor = 0.1
						NOR = {
							region = world_india
							region = world_steppe
							region = world_middle_east
							region = world_asia_minor
							region = world_persia
						}
					}
					modifier = {
						factor = 0.5
						NOR = {
							region = world_india
							region = world_steppe
							region = world_persia
						}
					}
					modifier = {
						factor = 0.5
						year = 1200
					}
					religion = nestorian
				}
				25 = {
					modifier = {
						factor = 0
						NOR = {
							region = world_persia
							region = world_steppe_east
							region = world_steppe_tarim
							region = world_middle_east_arabia
						}
					}
					modifier = {
						factor = 0.5
						year = 1100
					}
					modifier = {
						factor = 0.5
						year = 1200
					}
					religion = manichean
				}
				25 = {
					modifier = {
						factor = 0.25
						NOR = {
							region = world_middle_east_jerusalem
							culture_group = israelite
						}
					}
					religion = jewish
				}
				10 = {
					become_heretic = yes
				}
			}
			break = yes
		}
		if = {
			limit = { religion = catholic }
			random_list = {
				75 = {
					modifier = {
						factor = 0
						NOR = {
							region = world_europe_south_italy
							culture = italian
						}
					}
					religion = fraticelli
				}
				75 = {
					modifier = {
						factor = 0
						NOR = {
							region = custom_aquitaine
							region = custom_burgundy
							culture = occitan
						}
					}
					religion = cathar
				}
				75 = {
					modifier = {
						factor = 0
						NOT = { region = world_europe_west_brittania }
					}		
					modifier = {
						factor = 0.5
						NOR = {
							region = custom_england
							culture = english
						}
					}
					religion = lollard
				}
				75 = {
					modifier = {
						factor = 0
						NOR = {
							region = custom_france
							culture = frankish
						}
					}
					religion = waldensian
				}
				50 = {
					modifier = {
						factor = 0
						NOT = { region = world_europe_west_iberia }
					}
					religion = adoptionist
				}
				75 = {
					modifier = {
						factor = 0
						NOR = {
							region = world_europe_south_east
							region = world_europe_east
							region = world_asia_minor
							region = world_middle_east_jerusalem
						}
					}
					modifier = {
						factor = 0.35
						NOR = {
							region = custom_byzantium
							culture_group = byzantine
							culture_group = east_slavic
							culture_group = south_slavic
						}
					}
					religion = orthodox
				}
				25 = {
					modifier = {
						factor = 0
						NOR = {
							region = world_middle_east
							region = world_africa
						}
					}
					modifier = {
						factor = 1.5
						region = world_africa_east
					}
					religion = miaphysite
				}
				25 = {
					modifier = {
						factor = 0
						NOR = {
							region = custom_armenia
							region = custom_georgia
						}
					}
					modifier = {
						factor = 1.5
						region = custom_armenia
					}
					religion = apostolic
				}
				25 = {
					modifier = {
						factor = 0
						NOR = {
							region = world_india
							region = world_steppe
							region = world_middle_east
							region = world_asia_minor
							region = world_persia
						}
					}
					modifier = {
						factor = 0.5
						NOR = {
							region = world_india
							region = world_steppe
							region = world_persia
						}
					}
					modifier = {
						factor = 0.5
						year = 1200
					}
					religion = nestorian
				}
				25 = {
					modifier = {
						factor = 0
						NOR = {
							region = world_persia
							region = world_steppe_east
							region = world_steppe_tarim
							region = world_middle_east_arabia
						}
					}
					modifier = {
						factor = 0.5
						year = 1100
					}
					modifier = {
						factor = 0.5
						year = 1200
					}
					religion = manichean
				}
				25 = {
					modifier = {
						factor = 0.1
						NOR = {
							region = world_middle_east_jerusalem
							culture_group = israelite
						}
					}
					religion = jewish
				}
				25 = {
					become_heretic = yes
				}
			}
			break = yes			
		}
		if = {
			limit = { religion = orthodox }
			random_list = {
				50 = {
					modifier = {
						factor = 0
						NOR = {
							region = custom_bulgaria
							region = custom_croatia
							region = custom_serbia
							culture_group = south_slavic
						}
					}
					modifier = {
						factor = 1.5
						region = custom_bulgaria
					}
					religion = bogomilist
				}
				50 = {
					modifier = {
						factor = 0
						NOT = { region = custom_byzantium }
					}
					religion = iconoclast
				}
				25 = {
					modifier = {
						factor = 0
						NOR = {
							region = custom_armenia
							region = custom_georgia
							culture = armenian
						}
					}
					religion = paulician
				}
				50 = {
					modifier = {
						factor = 0
						NOR = {
							region = world_middle_east
							region = custom_azerbaijan
							region = custom_persia
							culture_group = arabic
						}
					}
					religion = monothelite
				}
				25 = {
					modifier = {
						factor = 0
						NOR = {
							region = world_india
							region = world_steppe
							region = world_middle_east
							region = world_asia_minor
							region = world_persia
						}
					}
					modifier = {
						factor = 0.5
						NOR = {
							region = world_india
							region = world_steppe
							region = world_persia
						}
					}
					modifier = {
						factor = 0.5
						year = 1200
					}
					religion = nestorian
				}
				25 = {
					modifier = {
						factor = 0
						NOR = {
							region = world_middle_east
							region = world_africa
						}
					}
					modifier = {
						factor = 1.5
						region = world_africa_east
					}
					religion = miaphysite
				}
				25 = {
					modifier = {
						factor = 0
						NOR = {
							region = custom_armenia
							region = custom_georgia
						}
					}
					modifier = {
						factor = 1.5
						region = custom_armenia
					}
					religion = apostolic
				}
				25 = {
					modifier = {
						factor = 0
						NOR = {
							region = world_persia
							region = world_steppe_east
							region = world_steppe_tarim
							region = world_middle_east_arabia
						}
					}
					modifier = {
						factor = 0.5
						year = 1100
					}
					modifier = {
						factor = 0.5
						year = 1200
					}
					religion = manichean
				}
				25 = {
					modifier = {
						factor = 0
						NOR = {
							region = world_europe_west
							region = world_europe_north
							region = world_europe_south_italy
							region = custom_croatia
							region = custom_poland
							region = custom_carpathia
						}
					}
					religion = catholic
				}
				25 = {
					modifier = {
						factor = 0.1
						NOR = {
							region = world_middle_east_jerusalem
							culture_group = israelite
						}
					}
					religion = jewish
				}
				25 = {
					become_heretic = yes
				}
			}
			break = yes
		}
		if = {
			limit = { religion = nestorian }
			random_list = {
				25 = {
					modifier = {
						factor = 0
						NOR = {
							region = world_india
							region = world_middle_east
							region = world_steppe
							region = world_persia
						}
					}
					religion = manichean
				}
				25 = {
					modifier = {
						factor = 0
						NOR = {
							region = world_africa
							region = world_middle_east
						}
					}
					religion = miaphysite
				}
				25 = {
					modifier = {
						factor = 0
						NOT = {
							region = world_asia_minor
						}
					}
					religion = apostolic
				}
				25 = {
					modifier = {
						factor = 0
						NOT = { region = world_europe }
					}
					if = {
						limit = { has_global_flag = schism_happened }
						religion = orthodox
					}
					if = {
						limit = { NOT = { has_global_flag = schism_happened } }
						religion = chalcedonian
					}
				}
				50 = { become_heretic = yes }
			}
			break = yes
		}
		if = {
			limit = { religion = miaphysite }
			random_list = {
				25 = {
					modifier = {
						factor = 0
						NOR = {
							region = world_india
							region = world_middle_east
							region = world_steppe
							region = world_persia
						}
					}
					modifier = {
						factor = 0.5
						year = 1200
					}
					modifier = {
						factor = 0.5
						year = 1100
					}
					religion = manichean
				}
				25 = {
					modifier = {
						factor = 0
						NOR = {
							region = world_india
							region = world_africa
							region = world_steppe
							region = world_middle_east
							region = world_persia
						}
					}
					modifier = {
						factor = 0.5
						year = 1200
					}
					religion = nestorian
				}
				25 = {
					modifier = {
						factor = 0
						NOT = {
							region = world_asia_minor
						}
					}
					religion = apostolic
				}
				25 = {
					modifier = {
						factor = 0
						NOR = {
							region = world_europe
							region = world_middle_east
						}
					}
					if = {
						limit = { has_global_flag = schism_happened }
						religion = orthodox
					}
					if = {
						limit = { NOT = { has_global_flag = schism_happened } }
						religion = chalcedonian
					}
				}
				25 = { religion = monophysite }
			}
			break = yes
		}
		become_heretic = yes
		break = yes
	}
	if = {
		limit = { religion_group = muslim }
		random_list = {
			40 = {
				modifier = {
					factor = 0
					religion = sunni
				}
				modifier = {
					factor = 0.25
					religion = shiite
				}
				religion = sunni
			}
			20 = {
				modifier = {
					factor = 0
					religion = yazidi
				}
				modifier = {
					factor = 0
					NOR = {
						culture = kurdish
						region = custom_armenia
						region = custom_azerbaijan
						region = custom_mesopotamia
					}
				}
				modifier = {
					factor = 2
					culture = kurdish
				}
				modifier = {
					factor = 0.25
					NOT = { culture = kurdish }
					region = custom_mesopotamia
				}
				religion = yazidi
			}
			20 = {
				modifier = {
					factor = 0
					religion = ibadi
				}
				modifier = {
					factor = 0.5
					NOR = {
						region = world_africa
						region = custom_arabia
						culture = bedouin_arabic
					}
				}
				modifier = {
					factor = 2
					culture = bedouin_arabic
				}
				religion = ibadi
			}
			20 = {
				modifier = {
					factor = 0
					religion = kharijite
				}
				modifier = {
					factor = 0
					NOR = {
						religion = ibadi
						region = world_middle_east_arabia
					}
				}
				religion = kharijite
			}
			40 = {
				modifier = {
					factor = 0
					religion = shiite
				}
				modifier = {
					factor = 1.5
					religion = sunni
				}
				religion = shiite
			}
			20 = {
				modifier = {
					factor = 0
					religion = bektashi
				}
				modifier = {
					factor = 0
					NOT = { region = world_europe_south_east }
				}
				religion = bektashi
			}
			20 = {
				modifier = {
					factor = 0
					religion = druze
				}
				modifier = {
					factor = 0
					NOR = {
						region = world_middle_east_jerusalem
						culture = levantine_arabic
					}
				}
				modifier = {
					factor = 0.25
					culture = levantine_arabic
					NOT = { region = world_middle_east_jerusalem }
				}
				religion = druze
			}
			20 = {
				modifier = {
					factor = 0
					religion = hurufi
				}
				religion = hurufi
			}
			10 = {
				modifier = {
					factor = 2
					region = custom_persia
				}
				modifier = {
					factor = 0
					NOR = {
						region = world_persia
						region = custom_mesopotamia
						region = custom_khwarizm
						culture = persian
					}
				}
				modifier = {
					factor = 0.5
					year = 1200
				}
				religion = zoroastrian
			}
			10 = {
				modifier = {
					factor = 2
					region = world_steppe
				}
				modifier = {
					factor = 0
					NOR = {
						region = world_india
						region = world_middle_east
						region = custom_azerbaijan
						region = world_persia
						region = world_steppe
					}
				}
				modifier = {
					factor = 0.5
					year = 1100
				}
				modifier = {
					factor = 0.5
					year = 1200
				}
				religion = manichean
			}
			10 = {
				modifier = {
					factor = 0
					NOT = { region = custom_jerusalem }
				}
				religion = jewish
			}
			10 = {
				modifier = {
					factor = 0
					NOT = { region = world_africa }
				}
				religion = miaphysite
			}
			10 = {
				modifier = {
					factor = 0
					NOT = { region = world_asia_minor }
				}
				religion = apostolic
			}
			25 = {
				modifier = {
					factor = 0
					NOR = {
						region = world_europe_south_east
						region = world_europe_east
					}
				}
				modifier = {
					factor = 0.5
					NOR = {
						region = custom_byzantium
						culture_group = byzantine
						culture_group = east_slavic
						culture_group = south_slavic
					}
				}
				if = {
					limit = { has_global_flag = schism_happened }
					religion = orthodox
				}
				if = {
					limit = { NOT = { has_global_flag = schism_happened } }
					religion = chalcedonian
				}
			}
			25 = {
				modifier = {
					factor = 0
					NOR = {
						region = world_europe_west
						region = world_europe_north
						region = world_europe_south_italy
					}
				}
				if = {
					limit = { has_global_flag = schism_happened }
					religion = catholic
				}
				if = {
					limit = { NOT = { has_global_flag = schism_happened } }
					religion = chalcedonian
				}
			}
			10 = {
				become_heretic = yes
			}
		}
		break = yes
	}
	if = {
		limit = { religion_group = jewish_group }
		random_list = {
			75 = {
				modifier = {
					factor = 0
					NOT = { culture_group = altaic }
				}
				modifier = {
					factor = 0
					religion = karaite
				}
				religion = karaite
			}
			25 = {
				modifier = {
					factor = 0
					NOR = {
						region = world_europe_south_east
						region = world_europe_east
					}
				}
				modifier = {
					factor = 0.5
					NOR = {
						region = custom_byzantium
						culture_group = byzantine
						culture_group = east_slavic
						culture_group = south_slavic
					}
				}
				if = {
					limit = { has_global_flag = schism_happened }
					religion = orthodox
				}
				if = {
					limit = { NOT = { has_global_flag = schism_happened } }
					religion = chalcedonian
				}
			}
			25 = {
				modifier = {
					factor = 0
					NOR = {
						region = world_europe_west
						region = world_europe_north
						region = world_europe_south_italy
					}
				}
				if = {
					limit = { has_global_flag = schism_happened }
					religion = catholic
				}
				if = {
					limit = { NOT = { has_global_flag = schism_happened } }
					religion = chalcedonian
				}
			}
			25 = {
				modifier = {
					factor = 0
					NOT = { region = world_africa }
				}
				religion = miaphysite
			}
			25 = {
				modifier = {
					factor = 0
					NOT = { region = world_asia_minor }
				}
				religion = apostolic
			}
			50 = {
				modifier = {
					factor = 0.25
					culture_group = altaic
				}
				become_heretic = yes
			}
		}
		break = yes
	}
	if = {
		limit = { religion_group = zoroastrian_group }
		random_list = {
			50 = {
				modifier = {
					factor = 0
					religion = zoroastrian
				}
				modifier = {
					factor = 0.5
					religion = manichean
				}
				religion = zoroastrian
			}
			50 = {
				modifier = {
					factor = 0
					religion = manichean
				}
				modifier = {
					factor = 0.5
					religion = zoroastrian
				}
				religion = manichean
			}
			50 = {
				modifier = {
					factor = 0
					religion = yazidi
				}
				modifier = {
					factor = 0
					NOR = {
						culture = kurdish
						region = custom_armenia
						region = custom_azerbaijan
						region = custom_mesopotamia
					}
				}
				modifier = {
					factor = 2
					culture = kurdish
				}
				religion = yazidi
			}
			50 = {
				modifier = {
					factor = 0
					NOR = {
						culture = kurdish
						region = custom_armenia
						region = custom_azerbaijan
						region = custom_mesopotamia
					}
				}
				modifier = {
					factor = 2
					culture = kurdish
				}
				modifier = {
					factor = 0.25
					NOT = { culture = kurdish }
					region = custom_mesopotamia
				}					
				religion = yazidi
			}
			50 = {
				religion = shiite
			}
			50 = {
				modifier = {
					factor = 0
					NOT = { religion = manichean }
				}
				religion = nestorian
			}
			25 = {
				modifier = {
					factor = 0
					NOT = { region = world_africa }
				}
				religion = miaphysite
			}
			25 = {
				modifier = {
					factor = 0
					NOT = { region = world_asia_minor }
				}
				religion = apostolic
			}
			50 = {
				become_heretic = yes
			}
		}
		break = yes
	}
	become_heretic = yes
	break = yes
}

pardon_effect = {
	hidden_tooltip = {
		reverse_remove_opinion = {
			who = FROM
			modifier = opinion_traitor
		}
		reverse_remove_opinion = {
			who = FROM
			modifier = declared_war
		}
		reverse_remove_opinion = {
			who = FROM
			modifier = opinion_dishonorable
		}
		reverse_remove_opinion = {
			who = FROM
			modifier = opinion_rebel_traitor
		}
		reverse_remove_opinion = {
			who = FROM
			modifier = attempted_murder_of_spouse
		}
		reverse_remove_opinion = {
			who = FROM
			modifier = attempted_murder_of_vassal
		}
		reverse_remove_opinion = {
			who = FROM
			modifier = attempted_murder
		}
		reverse_remove_opinion = {
			who = FROM
			modifier = attempted_murder_of_child
		}
		reverse_remove_opinion = {
			who = FROM
			modifier = opinion_spouse_slayer
		}
		reverse_remove_opinion = {
			who = FROM
			modifier = opinion_murder_attempt
		}
		reverse_remove_opinion = {
			who = FROM
			modifier = opinion_killed_close_kin
		}
		reverse_remove_opinion = {
			who = FROM
			modifier = opinion_fatwa_target
		}
		reverse_remove_opinion = {
			who = FROM
			modifier = opinion_witch
		}
		reverse_remove_opinion = {
			who = FROM
			modifier = opinion_takfir
		}
		reverse_remove_opinion = {
			who = FROM
			modifier = attempted_murder_of_close_kin
		}
		reverse_remove_opinion = {
			who = FROM
			modifier = killed_vassal
		}
		reverse_remove_opinion = {
			who = FROM
			modifier = opinion_civil_war_loser
		}
		reverse_remove_opinion = {
			who = FROM
			modifier = mad_heretic
		}
		reverse_remove_opinion = {
			who = FROM
			modifier = devious_plotter
		}
		reverse_remove_opinion = {
			who = FROM
			modifier = attempted_kidnapping
		}
		reverse_remove_opinion = {
			who = FROM
			modifier = attempted_kidnapping_of_kin
		}
		reverse_remove_opinion = {
			who = FROM
			modifier = attempted_kidnapping_of_vassal
		}
		reverse_remove_opinion = {
			who = FROM
			modifier = opinion_kidnapped_kin
		}
	}
}

remove_patrons_effect = {
	remove_character_modifier = patron_shiva
	remove_character_modifier = patron_vishnu
	remove_character_modifier = patron_brahma
	remove_character_modifier = patron_kali
	remove_character_modifier = patron_ganesha
	remove_character_modifier = patron_ganga
}

turn_off_titles_effect = {
	any_title = {
		limit = {
			is_titular = yes
			has_holder = no
			OR = {
				title = e_armenia
				title = e_bohemia
				title = e_cornwall
				title = e_denmark
				title = e_egypt
				title = e_england
				title = e_finland
				title = e_ghana
				title = e_hungary
				title = e_ireland
				title = e_jolof
				title = e_norway
				title = e_nubia
				title = e_scotland
				title = e_serbia
				title = e_sicily
				title = e_wales
				title = e_wend
				title = k_antioch
				title = k_epirus
				title = k_gascony
				title = k_krete
				title = k_mallorca
				title = k_normandy
				title = k_slavonia
				title = k_swiss
			}
		}
		activate_title = { title = THIS status = no }
	}
}

turn_on_titles_effect = {
	any_title = {
		limit = {
			is_titular = yes
			has_holder = no
			OR = {
				title = e_armenia
				title = e_bohemia
				title = e_cornwall
				title = e_denmark
				title = e_egypt
				title = e_england
				title = e_finland
				title = e_ghana
				title = e_hungary
				title = e_ireland
				title = e_jolof
				title = e_norway
				title = e_nubia
				title = e_scotland
				title = e_serbia
				title = e_sicily
				title = e_wales
				title = e_wend
				title = k_antioch
				title = k_epirus
				title = k_gascony
				title = k_krete
				title = k_mallorca
				title = k_normandy
				title = k_slavonia
				title = k_swiss
			}
		}
		activate_title = { title = THIS status = yes }
	}
}

